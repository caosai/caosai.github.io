<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


  <meta name="google-site-verification" content="VvyjvVXcJQa0QklHipu6pwm2PJGnnchIqX7s5JbbT_0" />





  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>


    <meta name="description" content="To err is human; to forgive, divine." />



  <meta name="keywords" content="CAO,next" />



  <link rel="alternate" href="/atom.xml" title="Courage Me" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b56ed77ba442f0ae3cb743e752e28a87";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <title> Courage Me </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Courage Me</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            <i class="menu-item-icon icon-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
      <li> <a title="�����������ϵ�����Chrome�ղؼй�������" href='javascript:(function() {
	function c() {
		var e = document.createElement("link");
		e.setAttribute("type", "text/css");
		e.setAttribute("rel", "stylesheet");
		e.setAttribute("href", f);
		e.setAttribute("class", l);
		document.body.appendChild(e)
	}
 
	function h() {
		var e = document.getElementsByClassName(l);
		for (var t = 0; t < e.length; t++) {
			document.body.removeChild(e[t])
		}
	}
 
	function p() {
		var e = document.createElement("div");
		e.setAttribute("class", a);
		document.body.appendChild(e);
		setTimeout(function() {
			document.body.removeChild(e)
		}, 100)
	}
 
	function d(e) {
		return {
			height : e.offsetHeight,
			width : e.offsetWidth
		}
	}
 
	function v(i) {
		var s = d(i);
		return s.height > e && s.height < n && s.width > t && s.width < r
	}
 
	function m(e) {
		var t = e;
		var n = 0;
		while (!!t) {
			n += t.offsetTop;
			t = t.offsetParent
		}
		return n
	}
 
	function g() {
		var e = document.documentElement;
		if (!!window.innerWidth) {
			return window.innerHeight
		} else if (e && !isNaN(e.clientHeight)) {
			return e.clientHeight
		}
		return 0
	}
 
	function y() {
		if (window.pageYOffset) {
			return window.pageYOffset
		}
		return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
	}
 
	function E(e) {
		var t = m(e);
		return t >= w && t <= b + w
	}
 
	function S() {
		var e = document.createElement("audio");
		e.setAttribute("class", l);
		e.src = i;
		e.loop = false;
		e.addEventListener("canplay", function() {
			setTimeout(function() {
				x(k)
			}, 500);
			setTimeout(function() {
				N();
				p();
				for (var e = 0; e < O.length; e++) {
					T(O[e])
				}
			}, 15500)
		}, true);
		e.addEventListener("ended", function() {
			N();
			h()
		}, true);
		e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
		document.body.appendChild(e);
		e.play()
	}
 
	function x(e) {
		e.className += " " + s + " " + o
	}
 
	function T(e) {
		e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
	}
 
	function N() {
		var e = document.getElementsByClassName(s);
		var t = new RegExp("\\b" + s + "\\b");
		for (var n = 0; n < e.length; ) {
			e[n].className = e[n].className.replace(t, "")
		}
	}
 
	var e = 30;
	var t = 30;
	var n = 350;
	var r = 350;
	var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
	var s = "mw-harlem_shake_me";
	var o = "im_first";
	var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
	var a = "mw-strobe_light";
	var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
	var l = "mw_added_css";
	var b = g();
	var w = y();
	var C = document.getElementsByTagName("*");
	var k = null;
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			if (E(A)) {
				k = A;
				break
			}
		}
	}
	if (A === null) {
		console.warn("Could not find a node of the right size. Please try a different page.");
		return
	}
	c();
	S();
	var O = [];
	for (var L = 0; L < C.length; L++) {
		var A = C[L];
		if (v(A)) {
			O.push(A)
		}
	}
})()    '>High Once Time</a> </li>
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'PL96x7fVNTKfxFRsKqT8','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <div id="posts" class="posts-expand">
    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/16/Top-10-Java中常用于Array的方法/">
                Top 10 Java中常用于Array的方法
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-16
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Top-10-Series/">Top 10 Series</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/16/Top-10-Java中常用于Array的方法/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/16/Top-10-Java中常用于Array的方法/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>下面是经常在Java Array中用到的10个方法。在StackOverFlow上被提出最多的问题。</p>
<h2 id="1-_声明一个数组">1. 声明一个数组</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>[] aArray = <span class="keyword">new</span> <span class="built_in">String</span>[<span class="number">5</span>];</span><br><span class="line"><span class="built_in">String</span>[] bArray = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>&#125;;</span><br><span class="line"><span class="built_in">String</span>[] cArray = <span class="keyword">new</span> <span class="built_in">String</span>[]&#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="2-_打印一个数组">2. 打印一个数组</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int[] intArray = &#123; 1, 2, 3, 4, 5 &#125;;</span><br><span class="line">String intArrayString = Arrays.<span class="keyword">toString</span>(intArray);</span><br><span class="line">System.<span class="keyword">out</span>.println(intArray);</span><br><span class="line"><span class="comment">// [I@7150bd4d</span></span><br><span class="line">System.<span class="keyword">out</span>.println(intArrayString);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//foreach</span></span><br><span class="line"><span class="keyword">for</span>(int <span class="keyword">n</span> : intArray) &#123;</span><br><span class="line">	System.<span class="keyword">out</span>.<span class="keyword">print</span>(<span class="keyword">n</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-_用array创建一个list">3. 用array创建一个list</h2><p><strong>Arrays.asList(stringArray)</strong>传入一个数组，返回一个list<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span>[] stringArray = &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span> &#125;;</span><br><span class="line">ArrayList&lt;<span class="keyword">String</span>&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;(Arrays.asList(stringArray));</span><br><span class="line">System.out.<span class="built_in">println</span>(arrayList);</span><br><span class="line"><span class="comment">// [a, b, c, d, e]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="4-_连接两个数组(首尾连接)">4. 连接两个数组(首尾连接)</h2><p>用到apache一个jar包   commons-lang3-3.4.jar<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">int</span>[] intArray2 = &#123; <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line"><span class="keyword">int</span>[] combinedIntArray = ArrayUtils.addAll(intArray, intArray2);</span><br><span class="line"><span class="comment">// combinedIntArray &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10 &#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="5-_数组中插入分割字符">5. 数组中插入分割字符</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// containing the provided list of elements</span></span><br><span class="line"><span class="comment">// Apache common lang</span></span><br><span class="line"><span class="keyword">String</span> j = StringUtils.<span class="built_in">join</span>(<span class="keyword">new</span> <span class="keyword">String</span>[] &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span> &#125;, <span class="string">"|"</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(j);</span><br><span class="line"><span class="comment">// a| b| c</span></span><br></pre></td></tr></table></figure>
<h2 id="6-_ArrayList_转换_Array">6. ArrayList 转换 Array</h2><p>思路：用到List.toArray(array)方法<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span>[] stringArray = &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span> &#125;;</span><br><span class="line">ArrayList&lt;<span class="keyword">String</span>&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;(Arrays.asList(stringArray));</span><br><span class="line"><span class="comment">//创建一个和list的大小一致的空的数组</span></span><br><span class="line"><span class="keyword">String</span>[] stringArr = <span class="keyword">new</span> <span class="keyword">String</span>[arrayList.<span class="built_in">size</span>()];</span><br><span class="line"><span class="comment">//list 2 array</span></span><br><span class="line">arrayList.toArray(stringArr);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">String</span> s : stringArr)</span><br><span class="line">	System.out.<span class="built_in">println</span>(s);</span><br></pre></td></tr></table></figure></p>
<h2 id="7-_Array_2_Set">7. Array 2 Set</h2><p>set的构造函数可传入一个集合<br>  array to list  ;  new HsahSet(list)<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//set是无序的</span></span><br><span class="line"><span class="built_in">Set</span>&lt;<span class="built_in">String</span>&gt; <span class="literal">set</span> = <span class="keyword">new</span> HashSet&lt;<span class="built_in">String</span>&gt;(Arrays.asList(stringArray));</span><br><span class="line">System.out.println(<span class="literal">set</span>);</span><br><span class="line"><span class="comment">//[d, e, b, c, a]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="8-_反转Array">8. 反转Array</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">ArrayUtils.<span class="keyword">reverse</span>(intArray);</span><br><span class="line">System.out.<span class="keyword">println</span>(Arrays.toString(intArray));</span><br><span class="line"><span class="comment">//[5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<h2 id="9-_数组中删除一个元素">9. 数组中删除一个元素</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="comment">//create a new array</span></span><br><span class="line"><span class="keyword">int</span>[] removed = ArrayUtils.removeElement(intArray, <span class="number">3</span>);</span><br><span class="line">System.<span class="keyword">out</span>.println(Arrays.toString(removed));</span><br></pre></td></tr></table></figure>
<h2 id="10-_检查数组中是否包含某个值">10. 检查数组中是否包含某个值</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String[] stringArray = &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span> &#125;;</span><br><span class="line"><span class="keyword">boolean</span> b = Arrays.<span class="keyword">asList</span>(stringArray).contains(<span class="string">"a"</span>);</span><br><span class="line">System.out.<span class="keyword">println</span>(b);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">boolean</span> a = Arrays.<span class="keyword">asList</span>(numbers).contains(<span class="number">1</span>);</span><br><span class="line">System.out.<span class="keyword">println</span>();</span><br><span class="line"><span class="comment">//return false;</span></span><br></pre></td></tr></table></figure>
<p>上述String[] 是ok的，然而int[]却返回false。原因是Arrays.asList(array);这个方法的返回值<br>当array是int类型的时候，返回的是List<int[]>，而不是List<integer>。所以传入的值不会和int[]相等的。<br>此方法 不适用于int[]。</integer></int[]></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/12/Java中equals-和hashCode-的契约/">
                Java中equals()和hashCode()的契约
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-12
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/12/Java中equals-和hashCode-的契约/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/12/Java中equals-和hashCode-的契约/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p><img src="/avatar/java-hashcode.png" alt="Alt text"><br>Java的父类 java.lang.Object 有两个很重要的方法被定义如下：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public boolean <span class="function"><span class="title">equals</span><span class="params">(Object obj)</span></span></span><br><span class="line">public int <span class="function"><span class="title">hashCode</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></p>
<p>它们已经被证明非常重要去理解，特别当用户自定义的对象被add到Maps中。然后，即使是高级开发者有时候也不知道如何合理的使用这两个方法。这篇文章中，我首先举一个经常犯的错误的例子，并解释hashCode和equals是如何起作用的。</p>
<h2 id="1-_一个常见的错误">1. 一个常见的错误</h2><p>常见的错误如下例子<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.<span class="keyword">HashMap</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class Apple &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> Apple(<span class="keyword">String</span> <span class="built_in">color</span>) &#123;</span><br><span class="line">		<span class="keyword">this</span>.<span class="built_in">color</span> = <span class="built_in">color</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> obj) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Apple))</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;	</span><br><span class="line">		<span class="keyword">if</span> (obj == <span class="keyword">this</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.<span class="built_in">color</span>.equals(((Apple) obj).<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		Apple a1 = <span class="keyword">new</span> Apple(<span class="string">"green"</span>);</span><br><span class="line">		Apple a2 = <span class="keyword">new</span> Apple(<span class="string">"red"</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="comment">//hashMap stores apple type and its quantity</span></span><br><span class="line">		<span class="keyword">HashMap</span>&lt;Apple, Integer&gt; m = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;Apple, Integer&gt;();</span><br><span class="line">		m.put(a1, <span class="number">10</span>);</span><br><span class="line">		m.put(a2, <span class="number">20</span>);</span><br><span class="line">		System.out.<span class="built_in">println</span>(m.<span class="built_in">get</span>(<span class="keyword">new</span> Apple(<span class="string">"green"</span>)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，一个green苹果对象被成功的存在一个HashMap中，但是当在map中查询此对象的时候，这个对象没有被找到。程序结果是null。然而我们可以确定的是在debugger中该对象确实存在HashMap中。<br><img src="/avatar/hashCode-and-equals-contract.png" alt="Alt text"></p>
<h2 id="2-_问题是由hashCode()引起的">2. 问题是由hashCode()引起的</h2><p>这个问题是由于没有重写hashCode()方法。hashCode和equals中的契约是这样的：</p>
<ol>
<li>如果两个对象相等，它们必须有相同的hashcode值。</li>
<li>如果两个对象有相同的hashcode值，它们可能相等也可能不相等。</li>
</ol>
<p>Map背后的思想是能找比线性搜索更快的找到一个对象。使用散列键值来定位对象有两步过程。map内部存储对象作为一个数组的数组。第一个数组的索引就是键的hashCode的值。位于第二个数组通过线性搜索根据equals()来判断该对象是否被找到。</p>
<p>对象类的默认实现了hashcode()方法并返回不同的整数对于不同的对象来说。因此，在上面的例子中，不同的对象（即使同一类型）都有不同的hashCode值。</p>
<p>hashcode就像是一个序列的仓库存储，不同的东西可以存储在不同的仓库中。如果你把材料组织到不同的地方，而不是同一个仓库，那就更有效了。所以这是平均分配的hashCode值的一个很好的实践。（虽然不是主要的观点）。</p>
<p>解决方案就是在类中添加hashCode()方法，这里我只是使用color字符串的长度做示范。<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.color.length();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.programcreek.com/2011/07/java-equals-and-hashcode-contract/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/08/Top关于Java中Map的9种常见问题/">
                Top关于Java中Map的9种常见问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-08
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/08/Top关于Java中Map的9种常见问题/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/08/Top关于Java中Map的9种常见问题/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>总的来说，Map是一种集合的数据结构有key-value对组成，每一个key可以在Map中出现一次。这篇文章总结了Java中Map最常用的9种使用方法。为了简单起见，我将在例子中使用泛型。因此我只使用Map而不使用具体的Map。但是你可以假设K和V都实现了Comparable接口。</p>
<h2 id="0-_Map2List_Map转化成List">0. Map2List Map转化成List</h2><p>Java中，Map接口提供三种集合：key集合、value结合、和key-value结合。它们都可以转化成一个List通过一个构造器或者addAll()方法。下面的代码片段展示了如何使用构造器创建通过Map创建一个ArrayList。</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//keyList</span></span><br><span class="line"><span class="built_in">List</span> keyList <span class="subst">=</span> ArrayList(<span class="built_in">map</span><span class="built_in">.</span>keySet());</span><br><span class="line"><span class="comment">//valueList</span></span><br><span class="line"><span class="built_in">List</span> valueList <span class="subst">=</span> ArrayList(<span class="built_in">map</span><span class="built_in">.</span>valueSet());</span><br><span class="line"><span class="comment">//entryList key-value set</span></span><br><span class="line"><span class="built_in">List</span> entryList <span class="subst">=</span> ArrayList(<span class="built_in">map</span><span class="built_in">.</span>entrySet());</span><br></pre></td></tr></table></figure>
<h2 id="1-_在Map中遍历每一个Entry">1. 在Map中遍历每一个Entry</h2><p>通过一个键值对迭代遍历一个Map是最基本的操作。在Java，键值对存储在Map中被称为Map.Entry。Map.entrySet()返回一个键值对的集合，因此要通过一个Map的每一个entry是最有效的方式来遍历map</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">for</span>(<span class="preprocessor">Entry</span> <span class="preprocessor">entry</span> : <span class="preprocessor">map</span>.entrySet()) &#123;</span><br><span class="line">	K key = <span class="preprocessor">entry</span>.getKey()<span class="comment">;</span></span><br><span class="line">	V value = <span class="preprocessor">entry</span>.getValue()<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在JDK1.5以前还可以一下方式遍历Map</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Iterator </span><span class="keyword">it </span>= <span class="preprocessor">map</span>.entrySet().<span class="keyword">iterator();</span><br><span class="line"></span><span class="label">while</span>(<span class="keyword">it.hasNext()) </span>&#123;</span><br><span class="line">	<span class="preprocessor">Entry</span> <span class="preprocessor">entry</span> = <span class="keyword">it.next();</span><br><span class="line"></span>	K key = <span class="preprocessor">entry</span>.getKey()<span class="comment">;</span></span><br><span class="line">	V value = <span class="preprocessor">entry</span>.getValue()<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-_根据key在Map中排序">2. 根据key在Map中排序</h2><p>根据key排序Map是一个经常用到的操作。一个方法是将Map.Entry放进List中，使用一个比较器Comparator来排序value。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List <span class="built_in">list</span> = <span class="keyword">new</span> ArrayList(<span class="built_in">map</span>.entrySet());</span><br><span class="line">Collections.sort(<span class="built_in">list</span>,<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">	@<span class="function">Override</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Entry e1, Entry e2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> e1.getKey().compareTo(e2.getKey());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>另外一种方法是使用排好序的Map，可以根据key值进行自动排序。因此所有的key值必须要实现Comparable接口或者可以被一个Comparator接受。<br>一种实现了SortMap的类是TreeMap。它的构造器可以接受一个Comparator。下面的代码展示了如何将一个map转换成一个排好序的map的。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SortedMap sortMap = <span class="keyword">new</span> TreeMap(<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(K k1, K k2)</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">return</span> k1.<span class="title">compareTo</span><span class="params">(k2)</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">sortMap.putAll(map);</span><br></pre></td></tr></table></figure>
<h2 id="3-_根据value在Map中排序">3. 根据value在Map中排序</h2><p>将Map变成一个list然后排序也是可以的，不同的是我们比较Entry.getValue().下面的代码和上面几乎一样。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List <span class="built_in">list</span> = <span class="keyword">new</span> ArrayList(<span class="built_in">map</span>.entrySet());</span><br><span class="line">Collections.sort(<span class="built_in">list</span>,<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">	@<span class="function">Override</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Entry e1, Entry e2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> e1.getValue().compareTo(e2.getValue());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>我们仍然可以使用一个排序的Map来解决这个问题，但只有当value是唯一的时候。在这样的条件下，你可以把key-value的值反倒。这个解决方案有很强的限制，因此不推荐使用。</p>
<h2 id="4-_初始化一个静态的或者不可以变的Map">4. 初始化一个静态的或者不可以变的Map</h2><p>当你期望Map保持不变时，将它复制到一个不可改变的Map上是一个很好的做法。这种防御性的编程技术将帮助您创建不仅使用安全局，但而且线程Map也很安全。<br>初始化一个静态的、一成不变的Map，我们可以使用一个静态初始化器（如下）。这个代码的问题是，尽管Map被声明为static final，我们仍然可以在初始化之后对它进行操作，如Test.map.put(3,”three”);操作。因此它不是真的不可改变的。使用静态初始化器创建一个不变的Map，在初始化的最后一步，我们需要一个额外的匿名类并复制到一个不可修改的Map中。请参阅第二段代码。如果你运行Test.map.put(3,”three”);然后一个UnsupportedOperationException异常将会被抛出。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> final Map <span class="built_in">map</span>;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		<span class="built_in">map</span> = <span class="keyword">new</span> Map();</span><br><span class="line">		<span class="built_in">map</span>.put(<span class="string">"a"</span>,<span class="number">3</span>);</span><br><span class="line">		<span class="built_in">map</span>.put(<span class="string">"b"</span>,<span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> final Map <span class="built_in">map</span>;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		Map tmpMap = <span class="keyword">new</span> Map();</span><br><span class="line">		tmpMap.put(<span class="string">"a"</span>,<span class="number">3</span>);</span><br><span class="line">		tmpMap.put(<span class="string">"b"</span>,<span class="number">4</span>);</span><br><span class="line">		<span class="built_in">map</span> = Collections.unmodifiableMap(tmpMap);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Guava libraries也支持不同的初始化静态不变的Collection的方法。要了解更多关于Guava 不可变的Collection的好处，去看不可变集合的解释在Guava User Guide中。</p>
<h2 id="5-_HashMap,TreeMap,HashTable区别">5. HashMap,TreeMap,HashTable区别</h2><p>在Java中实现Map接口的三个主要实现类分别是：HashMap,TreeMap,HashTable<br>他们之间最重要的区别如下：</p>
<ol>
<li><strong>遍历的顺序</strong>。HashMap和HashTable不能保证map中元素的顺序，特别是，他们不保证随着时间的推移顺序会保持不变。但TreeMap将遍历整个条目按“自然顺序”的key值，或由一个比较器。</li>
<li><strong>key-value的规则</strong>。HashMap允许null的key或者value（只能有一个null的key，因为map中不能存在两个相同的key）。HashTable不允许null的key或者value。如果TreeMap根据自然顺序或者比较器来排序的话，它的key值不能为null，否则会抛出异常。</li>
<li><strong>同步</strong>。只有HashTable是同步的。因此如果不需要实现一个线程安全，推荐使用HashMap代替HashTable。</li>
</ol>
<h2 id="6-_具有反向视图和查询的Map">6. 具有反向视图和查询的Map</h2><p>有时候，我们需要一个key-value对的集合，这就意味着key和value都是唯一的（one-to-one Map）。这种约束可以确保可以创建一个“反向试图和查询的Map”。所以我们可以通过value去查询一个key。这种数据结构被称作双向映射的Map，不幸的是java JDK不支持。<br>    Apache Common Collections 和 Guava 提供了实现双向映射的Map类。分别称为BidiMap和BiMap。这两种都需要强制约束它们的key和value的值1:1的关系。</p>
<h2 id="7-_Map的浅拷贝">7. Map的浅拷贝</h2><p>在Java中实现Map的大部分类，提供一个拷贝其他map的构造方法。但是拷贝的过程不是同步的。那就意味着当一个线程拷贝一个map，另一个线程可能会改变它的结构。为了阻止偶然不同步的拷贝，必须提前用到Collections.synchronizedMap()。</p>
<blockquote>
<p>Map copiedMap = Collections.synchronizedMap(map);<br>另一种有趣的浅拷贝的方式是使用clone(),然而即使是Java集合框架的设计者Josh Bloch都不推荐使用这种方法。在一次讨论” constructor 和 cloning 拷贝的比较”中，他说：<br>我经常提供一个public的clone方法在创建类的时候，因为大家希望如此。这是克隆的耻辱，但它发生。…克隆是一个弱点，我认为人们应该意识到它的局限性。</p>
</blockquote>
<p>正因如此，我将不会告诉你如何使用clone()方法进行拷贝一个map。</p>
<h2 id="8-_创建一个空的Map">8. 创建一个空的Map</h2><p>如果Map是不可变的。使用<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span> = Collections.emptyMap();</span><br></pre></td></tr></table></figure></p>
<p>否则，使用如下实现的方式。<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>();</span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.programcreek.com/2013/09/top-9-questions-for-java-map/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/07/HashMap-vs-TreeMap-vs-HashTable-vs-LinkedHashMap/">
                HashMap vs TreeMap vs HashTable vs LinkedHashMap
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-07
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/07/HashMap-vs-TreeMap-vs-HashTable-vs-LinkedHashMap/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/07/HashMap-vs-TreeMap-vs-HashTable-vs-LinkedHashMap/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>Java中Map是最重要的数据结构之一。在这篇文章中，我将说明如何使用不同类型的Map，如HashMap，TreeMap，哈希表和LinkedHashMap。</p>
<h2 id="1-_Map的概要">1. Map的概要</h2><p><img src="/avatar/MapClassHierarchy.png" alt="Alt text"></p>
<p>在Java SE中有四种经常被实现的Map类型被使用。HashMap，TreeMap，HashTable和LinkedHashMap。</p>
<pre><code><span class="bullet">* </span>HashMap是一个哈希表实现的,它的键或值是没有排序的。
<span class="bullet">* </span>TreeMap是基于红黑树结构的实现，它是按照key进行排序的。
<span class="bullet">* </span>LinkedHashMap保留插入顺序排序。
<span class="bullet">* </span>哈希表是同步的，即线程安全的，其他的与HashMap一样。它有一个同步的开销。这是HashMap应该在程序是线程安全的时候被使用的原因。
</code></pre><h2 id="2-_HashMap">2. HashMap</h2><p>如果HashMap的key值是自定义的对象，那么equals()和hashCode()方法的规定需要被遵循。</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	String <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog<span class="params">(String c)</span> &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line">	public String toString<span class="params">()</span>&#123;	</span><br><span class="line">		return <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class TestHashMap &#123;</span><br><span class="line">	public static void main<span class="params">(String[] args)</span> &#123;</span><br><span class="line">		HashMap&lt;Dog, Integer&gt; hashMap = new HashMap&lt;Dog, Integer&gt;<span class="params">()</span>;</span><br><span class="line">		Dog d1 = new Dog<span class="params">(<span class="string">"red"</span>)</span>;</span><br><span class="line">		Dog d2 = new Dog<span class="params">(<span class="string">"black"</span>)</span>;</span><br><span class="line">		Dog d3 = new Dog<span class="params">(<span class="string">"white"</span>)</span>;</span><br><span class="line">		Dog d4 = new Dog<span class="params">(<span class="string">"white"</span>)</span>;</span><br><span class="line"> </span><br><span class="line">		hashMap.put<span class="params">(d1, <span class="number">10</span>)</span>;</span><br><span class="line">		hashMap.put<span class="params">(d2, <span class="number">15</span>)</span>;</span><br><span class="line">		hashMap.put<span class="params">(d3, <span class="number">5</span>)</span>;</span><br><span class="line">		hashMap.put<span class="params">(d4, <span class="number">20</span>)</span>;</span><br><span class="line"> </span><br><span class="line">		<span class="comment">//print size</span></span><br><span class="line">		System.out.println<span class="params">(hashMap.size<span class="params">()</span>)</span>;</span><br><span class="line"> </span><br><span class="line">		<span class="comment">//loop HashMap</span></span><br><span class="line">		<span class="keyword">for</span> <span class="params">(Entry&lt;Dog, Integer&gt; entry : hashMap.entrySet<span class="params">()</span>)</span> &#123;</span><br><span class="line">			System.out.println<span class="params">(entry.getKey<span class="params">()</span>.toString<span class="params">()</span> + <span class="string">" - "</span> + entry.getValue<span class="params">()</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>4<br>white dog - 5<br>black dog - 15<br>red dog - 10<br>white dog - 20</p>
</blockquote>
<p>注意，我们错误的add “white dogs” 两次，但是HashMap接受了。这并没有意义的，因为现在我们很困惑有多少只white dogs在HashMap中。</p>
<p>Dog类必须定义如下所示：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">		<span class="keyword">return</span> ((Dog) o).<span class="built_in">color</span>.equals(<span class="keyword">this</span>.<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span>.length();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在输出的结果：</p>
<blockquote>
<p>3<br>red dog - 10<br>white dog - 20<br>black dog - 15</p>
</blockquote>
<p>原因是HashMap不允许两个相同的元素。默认情况下，该hashcode()和equals()方法在对象类实现的被使用。默认hashcode()方法return不同的对象不同的整数返回值，equals()方法只返回true仅当两个引用指向同一个对象。看看hashcode()和equals()的约定是不是符合你的预期。</p>
<h2 id="3-_TreeMap">3. TreeMap</h2><p>TreeMap是按key值排序的。让我们先来看一下下面的例子来理解“按key排序”的思路。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">		<span class="keyword">return</span> ((Dog) o).<span class="built_in">color</span>.equals(<span class="keyword">this</span>.<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span>.length();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class TestTreeMap &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		Dog d1 = <span class="keyword">new</span> Dog(<span class="string">"red"</span>);</span><br><span class="line">		Dog d2 = <span class="keyword">new</span> Dog(<span class="string">"black"</span>);</span><br><span class="line">		Dog d3 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line">		Dog d4 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line"> </span><br><span class="line">		TreeMap&lt;Dog, Integer&gt; treeMap = <span class="keyword">new</span> TreeMap&lt;Dog, Integer&gt;();</span><br><span class="line">		treeMap.put(d1, <span class="number">10</span>);</span><br><span class="line">		treeMap.put(d2, <span class="number">15</span>);</span><br><span class="line">		treeMap.put(d3, <span class="number">5</span>);</span><br><span class="line">		treeMap.put(d4, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Dog, Integer&gt; entry : treeMap.entrySet()) &#123;</span><br><span class="line">			System.out.<span class="built_in">println</span>(entry.getKey() + <span class="string">" - "</span> + entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>Exception in thread “main” java.lang.ClassCastException: collection.Dog cannot be &gt; cast to java.lang.Comparable<br>at java.util.TreeMap.put(Unknown Source)<br>at collection.TestHashMap.main(TestHashMap.java:35)</p>
</blockquote>
<p>从TreeMap是按key排序的，key的对象必须能够相互比较，这就是为什么它必须实现Comparable接口。例如，您将使用字符串作为键，因为字符串实现了Comparable接口。</p>
<p>修改Dog类让它具有可比性</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">class Dog implements Comparable&lt;Dog&gt;&#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line">	<span class="built_in">int</span> <span class="built_in">size</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c, <span class="built_in">int</span> s) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">		<span class="built_in">size</span> = s;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	@Override</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> compareTo(Dog o) &#123;</span><br><span class="line">		<span class="keyword">return</span>  o.<span class="built_in">size</span> - <span class="keyword">this</span>.<span class="built_in">size</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class TestTreeMap &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		Dog d1 = <span class="keyword">new</span> Dog(<span class="string">"red"</span>, <span class="number">30</span>);</span><br><span class="line">		Dog d2 = <span class="keyword">new</span> Dog(<span class="string">"black"</span>, <span class="number">20</span>);</span><br><span class="line">		Dog d3 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>, <span class="number">10</span>);</span><br><span class="line">		Dog d4 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>, <span class="number">10</span>);</span><br><span class="line"> </span><br><span class="line">		TreeMap&lt;Dog, Integer&gt; treeMap = <span class="keyword">new</span> TreeMap&lt;Dog, Integer&gt;();</span><br><span class="line">		treeMap.put(d1, <span class="number">10</span>);</span><br><span class="line">		treeMap.put(d2, <span class="number">15</span>);</span><br><span class="line">		treeMap.put(d3, <span class="number">5</span>);</span><br><span class="line">		treeMap.put(d4, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Dog, Integer&gt; entry : treeMap.entrySet()) &#123;</span><br><span class="line">			System.out.<span class="built_in">println</span>(entry.getKey() + <span class="string">" - "</span> + entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<blockquote>
<p>red dog - 10<br>black dog - 15<br>white dog - 20</p>
</blockquote>
<p>在这种情况下，它是根据key排序的，即Dog的size属性值。<br>如果”Dog d4 = new Dog(“white”, 10);” 被这句话替代 “Dog d4 = new Dog(“white”, 40);”, 输出结果将会是:</p>
<blockquote>
<p>white dog - 20<br>red dog - 10<br>black dog - 15<br>white dog - 5</p>
</blockquote>
<p>原因是，现在使用的方法compareto()比较TreeMap的key值。不同Dog的size不同！</p>
<h2 id="4-_HashTable">4. HashTable</h2><p>来自Java Doc<br>HashMap类大致相当于HashTable，除了它是不同步的，允许有空值之外。</p>
<h2 id="5-_LinkedHashMap">5. LinkedHashMap</h2><p>LinkedHashMap是HashMap的子类。这意味着它继承了HashMap的特点。此外，链表保留了插入顺序的排序。</p>
<p>让我们用相同的代码使用LinkedHashMap替换HashMap。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">		<span class="keyword">return</span> ((Dog) o).<span class="built_in">color</span>.equals(<span class="keyword">this</span>.<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span>.length();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class TestHashMap &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line"> </span><br><span class="line">		Dog d1 = <span class="keyword">new</span> Dog(<span class="string">"red"</span>);</span><br><span class="line">		Dog d2 = <span class="keyword">new</span> Dog(<span class="string">"black"</span>);</span><br><span class="line">		Dog d3 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line">		Dog d4 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line"> </span><br><span class="line">		LinkedHashMap&lt;Dog, Integer&gt; linkedHashMap = <span class="keyword">new</span> LinkedHashMap&lt;Dog, Integer&gt;();</span><br><span class="line">		linkedHashMap.put(d1, <span class="number">10</span>);</span><br><span class="line">		linkedHashMap.put(d2, <span class="number">15</span>);</span><br><span class="line">		linkedHashMap.put(d3, <span class="number">5</span>);</span><br><span class="line">		linkedHashMap.put(d4, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Dog, Integer&gt; entry : linkedHashMap.entrySet()) &#123;</span><br><span class="line">			System.out.<span class="built_in">println</span>(entry.getKey() + <span class="string">" - "</span> + entry.getValue());</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>red dog - 10<br>black dog - 15<br>white dog - 20</p>
</blockquote>
<p>不同的是，如果我们使用HashMap的输出结果顺序和插入的顺序是不一定一致的。</p>
<blockquote>
<p>red dog - 10<br>white dog - 20<br>black dog - 15</p>
</blockquote>
<p><a href="http://www.programcreek.com/2013/03/hashmap-vs-treemap-vs-hashtable-vs-linkedhashmap/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/07/remove以-bak结尾的文件/">
                remove以.bak结尾的文件
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-07
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Java-Tools/">Java Tools</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/07/remove以-bak结尾的文件/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/07/remove以-bak结尾的文件/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>使用UltraEdit编辑器的时候，产生了好多.bak结尾的备份文件。<br>一个一个的删除掉又比较费时，没啥意义，就想了个办法写个小程序来帮我做喽。<br>程序很简单，涉及到文件的路径和文件的递归遍历这两点。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.<span class="keyword">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> FileUtils &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		String filePath = <span class="string">"D:/test/_posts"</span>;</span><br><span class="line">		String suffix = <span class="string">".bak"</span>;</span><br><span class="line">		removeSomeFiles(filePath, suffix);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span><br><span class="line">	 * 删除以指定格式结尾的文件如 .txt .jpg .mp3等等</span><br><span class="line">	 * @param filePath 目录或文件的路径</span><br><span class="line">	 * @param suffix   文件结尾的格式</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> removeSomeFiles(String filePath, String suffix) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="keyword">File</span> f = <span class="keyword">new</span> <span class="keyword">File</span>(filePath);</span><br><span class="line">		<span class="keyword">if</span>(!f.isDirectory()) &#123;</span><br><span class="line">			<span class="keyword">if</span>(f.getName().endsWith(suffix)) </span><br><span class="line">				f.<span class="keyword">delete</span>();</span><br><span class="line">			</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">File</span>[] list = f.listFiles();</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">File</span> <span class="keyword">file</span> : list) &#123;</span><br><span class="line">				removeSomeFiles(<span class="keyword">file</span>.getCanonicalPath(), suffix);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/06/一个简单的TreeSet例子/">
                一个简单的TreeSet例子
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-06
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/06/一个简单的TreeSet例子/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/06/一个简单的TreeSet例子/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>下面是一个非常简单的TreeSet的例子。从这个简单的例子中我们可以得知：</p>
<ul>
<li>TreeSet是有序的</li>
<li>如何遍历TreeSet</li>
<li>如何检查空</li>
<li>如何检索第一个/最后一个元素</li>
<li>如何删除元素</li>
</ul>
<p>如果你想了解更多关于Java Collection的内容，你可以查看<a href="http://www.programcreek.com/2009/02/the-interface-and-class-hierarchy-for-collections/" target="_blank" rel="external">Java Collection hierarchy diagram</a></p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.<span class="type">Iterator</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">TreeSet</span>;</span><br><span class="line"> </span><br><span class="line">public class <span class="type">TreeSetExample</span> &#123;</span><br><span class="line"> </span><br><span class="line">   public <span class="keyword">static</span> <span class="type">void</span> main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Tree Set Example!\n"</span>);</span><br><span class="line">	<span class="type">TreeSet</span>&lt;<span class="type">Integer</span>&gt; tree = new <span class="type">TreeSet</span>&lt;<span class="type">Integer</span>&gt;();</span><br><span class="line">	tree.add(<span class="number">12</span>);</span><br><span class="line">	tree.add(<span class="number">63</span>);</span><br><span class="line">	tree.add(<span class="number">34</span>);</span><br><span class="line">	tree.add(<span class="number">45</span>);</span><br><span class="line"> </span><br><span class="line">	// here it test it's sorted, <span class="number">63</span> <span class="keyword">is</span> the last element. see output below</span><br><span class="line">	<span class="type">Iterator</span>&lt;<span class="type">Integer</span>&gt; <span class="keyword">iterator</span> = tree.<span class="keyword">iterator</span>();</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="string">"Tree set data: "</span>);</span><br><span class="line"> </span><br><span class="line">	// <span class="type">Displaying</span> the <span class="type">Tree</span> <span class="type">set</span> data</span><br><span class="line">	<span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="keyword">iterator</span>.next() + <span class="string">" "</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.println();</span><br><span class="line"> </span><br><span class="line">	// <span class="type">Check</span> empty <span class="keyword">or</span> <span class="keyword">not</span></span><br><span class="line">	<span class="keyword">if</span> (tree.isEmpty()) &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="string">"Tree Set is empty."</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Tree Set size: "</span> + tree.size());</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	// <span class="type">Retrieve</span> first data <span class="keyword">from</span> tree <span class="type">set</span></span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"First data: "</span> + tree.first());</span><br><span class="line"> </span><br><span class="line">	// <span class="type">Retrieve</span> last data <span class="keyword">from</span> tree <span class="type">set</span></span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Last data: "</span> + tree.last());</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span> (tree.remove(<span class="number">45</span>)) &#123; // remove element by value</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Data is removed from tree set"</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Data doesn't exist!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="string">"Now the tree set contain: "</span>);</span><br><span class="line">	<span class="keyword">iterator</span> = tree.<span class="keyword">iterator</span>();</span><br><span class="line"> </span><br><span class="line">	// <span class="type">Displaying</span> the <span class="type">Tree</span> <span class="type">set</span> data</span><br><span class="line">	<span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="keyword">iterator</span>.next() + <span class="string">" "</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.println();</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Now the size of tree set: "</span> + tree.size());</span><br><span class="line"> </span><br><span class="line">	// <span class="type">Remove</span> all</span><br><span class="line">	tree.clear();</span><br><span class="line">	<span class="keyword">if</span> (tree.isEmpty()) &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="string">"Tree Set is empty."</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"Tree Set size: "</span> + tree.size());</span><br><span class="line">	&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>Tree Set Example!</p>
<p>Tree set data: 12 34 45 63<br>Tree Set size: 4</p>
<p>First data: 12<br>Last data: 63</p>
<p>Data is removed from tree set</p>
<p>Now the tree set contain: 12 34 63<br>Now the size of tree set: 3</p>
<p>Tree Set is empty.</p>
</blockquote>
<p><a href="http://www.programcreek.com/2009/02/a-simple-treeset-example/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/06/HashSet-vs-TreeSet-vs-LinkedHashSet/">
                HashSet vs TreeSet vs LinkedHashSet
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-06
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/06/HashSet-vs-TreeSet-vs-LinkedHashSet/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/06/HashSet-vs-TreeSet-vs-LinkedHashSet/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>一个set集合不包含重复元素。这是使用set的主要原因之一。有3个常用的实现set的途径：HashSet，TreeSet和LinkedHashSet。何时使用哪一种是一个重要问题。总之，如果你需要一个快速的set，你应该使用HashSet；如果你需要一个有序集合，则使用TreeSet；如果你需要一个可以插入顺序存储的set，那么LinkedHashSet应被使用。</p>
<h2 id="1-_set的接口">1. set的接口</h2><p>Set继承Collection 接口。在一个set中，没有重复的元素。在set中的每一个元素必须是唯一的。你可以简单地将元素添加到一个集合中，重复的元素会被自动删除。</p>
<p>下图是set集合集成的树形图</p>
<p><img src="/avatar/java-collection-hierarchy.png" alt="Alt text"></p>
<h2 id="2-_HashSet_vs-_TreeSet_vs-_LinkedHashSet_之间的比较">2. HashSet vs. TreeSet vs. LinkedHashSet 之间的比较</h2><p>HashSet 使用一个 hash table 实现. 元素是无序的。添加add，删除remove，和包含contains的方法有恒定的时间复杂度O(1)。</p>
<p>TreeSet 使用一个树形结构实现（算法中的红黑树）。set中的元素是有序的，但是add、remove、contains方法的时间复杂度是O(log(n))。TreeSet提供不同的方法处理有序的set集合，像first()/last()/headSet()/tailSert()等</p>
<p>LinkedHashSet 基于HashSet和TreeSet之间。它使用一个hash table实现基于一个链表的结构，所以它提供按顺序插入到集合中，时间复杂度是O(1)</p>
<h2 id="3-_TreeSet的例子">3. TreeSet的例子</h2><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TreeSet</span>&lt;<span class="type">Integer</span>&gt; tree = new <span class="type">TreeSet</span>&lt;<span class="type">Integer</span>&gt;();</span><br><span class="line">tree.add(<span class="number">12</span>);</span><br><span class="line">tree.add(<span class="number">63</span>);</span><br><span class="line">tree.add(<span class="number">34</span>);</span><br><span class="line">tree.add(<span class="number">45</span>);</span><br><span class="line"> </span><br><span class="line"><span class="type">Iterator</span>&lt;<span class="type">Integer</span>&gt; <span class="keyword">iterator</span> = tree.<span class="keyword">iterator</span>();</span><br><span class="line"><span class="type">System</span>.<span class="keyword">out</span>.print(<span class="string">"Tree set data: "</span>);</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</span><br><span class="line">    <span class="type">System</span>.<span class="keyword">out</span>.print(<span class="keyword">iterator</span>.next() + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果(有序的)：</p>
<blockquote>
<p>Tree set data: 12 34 45 63 </p>
</blockquote>
<p>下面定义一个Dog类</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Dog</span> &#123;</span><br><span class="line">	<span class="keyword">int</span> size;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Dog</span>(<span class="params"><span class="keyword">int</span> s</span>) </span>&#123;</span><br><span class="line">		size = s;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> size + <span class="string">""</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>向TreeSet中add几组Dog对象</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.<span class="type">Iterator</span>;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">TreeSet</span>;</span><br><span class="line"> </span><br><span class="line">public class <span class="type">TestTreeSet</span> &#123;</span><br><span class="line">	public <span class="keyword">static</span> <span class="type">void</span> main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">		<span class="type">TreeSet</span>&lt;<span class="type">Dog</span>&gt; dset = new <span class="type">TreeSet</span>&lt;<span class="type">Dog</span>&gt;();</span><br><span class="line">		dset.add(new <span class="type">Dog</span>(<span class="number">2</span>));</span><br><span class="line">		dset.add(new <span class="type">Dog</span>(<span class="number">1</span>));</span><br><span class="line">		dset.add(new <span class="type">Dog</span>(<span class="number">3</span>));</span><br><span class="line"> </span><br><span class="line">		<span class="type">Iterator</span>&lt;<span class="type">Dog</span>&gt; <span class="keyword">iterator</span> = dset.<span class="keyword">iterator</span>();</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</span><br><span class="line">			<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="keyword">iterator</span>.next() + <span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译成功，但是运行时出现错误</p>
<blockquote>
<p>Exception in thread “main” java.lang.ClassCastException: collection.<strong>Dog cannot be cast to java.lang.Comparable</strong><br>    at java.util.TreeMap.put(Unknown Source)<br>    at java.util.TreeSet.add(Unknown Source)<br>    at collection.TestTreeSet.main(TestTreeSet.java:22)</p>
</blockquote>
<p>原因： TreeSet是有序的集合，Dog对象需要实现<strong>java.lang.Comparable’s compareTo()</strong> 方法</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Dog <span class="keyword">implements</span> Comparable&lt;Dog&gt;&#123;</span><br><span class="line">	<span class="keyword">int</span> <span class="keyword">size</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> Dog(<span class="keyword">int</span> s) &#123;</span><br><span class="line">		<span class="keyword">size</span> = s;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> String toString() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">size</span> + <span class="string">""</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	@Override</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> <span class="keyword">compareTo</span>(Dog o) &#123;</span><br><span class="line">	        <span class="keyword">return</span> <span class="keyword">size</span> - o.<span class="keyword">size</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>1 2 3</p>
</blockquote>
<h2 id="4-_HashSet_例子">4. HashSet 例子</h2><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HashSet</span>&lt;<span class="type">Dog</span>&gt; dset = new <span class="type">HashSet</span>&lt;<span class="type">Dog</span>&gt;();</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">2</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">1</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">3</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">5</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">4</span>));</span><br><span class="line"><span class="type">Iterator</span>&lt;<span class="type">Dog</span>&gt; <span class="keyword">iterator</span> = dset.<span class="keyword">iterator</span>();</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="keyword">iterator</span>.next() + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果</p>
<blockquote>
<p>5 3 2 1 4<br>注意结果顺序是不确定的。</p>
</blockquote>
<h2 id="5-_LinkedHashSet_例子">5. LinkedHashSet 例子</h2><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinkedHashSet</span>&lt;<span class="type">Dog</span>&gt; dset = new <span class="type">LinkedHashSet</span>&lt;<span class="type">Dog</span>&gt;();</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">2</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">1</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">3</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">5</span>));</span><br><span class="line">dset.add(new <span class="type">Dog</span>(<span class="number">4</span>));</span><br><span class="line"><span class="type">Iterator</span>&lt;<span class="type">Dog</span>&gt; <span class="keyword">iterator</span> = dset.<span class="keyword">iterator</span>();</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">iterator</span>.hasNext()) &#123;</span><br><span class="line">	<span class="type">System</span>.<span class="keyword">out</span>.print(<span class="keyword">iterator</span>.next() + <span class="string">" "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出的结果顺序是一定的，按照添加的先后顺序排序。</p>
<blockquote>
<p>2 1 3 5 4</p>
</blockquote>
<h2 id="6-_性能测试">6. 性能测试</h2><p>下面的测试方法是测试 三种不同的set的add方法的性能</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">public static void main<span class="params">(String[] args)</span> &#123;</span><br><span class="line"> </span><br><span class="line">	Random r = new Random<span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">	HashSet&lt;Dog&gt; hashSet = new HashSet&lt;Dog&gt;<span class="params">()</span>;</span><br><span class="line">	TreeSet&lt;Dog&gt; treeSet = new TreeSet&lt;Dog&gt;<span class="params">()</span>;</span><br><span class="line">	LinkedHashSet&lt;Dog&gt; linkedSet = new LinkedHashSet&lt;Dog&gt;<span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">// start time</span></span><br><span class="line">	long startTime = System.nanoTime<span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">for</span> <span class="params">(int i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span> &#123;</span><br><span class="line">		int x = r.nextInt<span class="params">(<span class="number">1000</span> - <span class="number">10</span>)</span> + <span class="number">10</span>;</span><br><span class="line">		hashSet.add<span class="params">(new Dog<span class="params">(x)</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// end time</span></span><br><span class="line">	long endTime = System.nanoTime<span class="params">()</span>;</span><br><span class="line">	long duration = endTime - startTime;</span><br><span class="line">	System.out.println<span class="params">(<span class="string">"HashSet: "</span> + duration)</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">// start time</span></span><br><span class="line">	startTime = System.nanoTime<span class="params">()</span>;</span><br><span class="line">	<span class="keyword">for</span> <span class="params">(int i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span> &#123;</span><br><span class="line">		int x = r.nextInt<span class="params">(<span class="number">1000</span> - <span class="number">10</span>)</span> + <span class="number">10</span>;</span><br><span class="line">		treeSet.add<span class="params">(new Dog<span class="params">(x)</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// end time</span></span><br><span class="line">	endTime = System.nanoTime<span class="params">()</span>;</span><br><span class="line">	duration = endTime - startTime;</span><br><span class="line">	System.out.println<span class="params">(<span class="string">"TreeSet: "</span> + duration)</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">// start time</span></span><br><span class="line">	startTime = System.nanoTime<span class="params">()</span>;</span><br><span class="line">	<span class="keyword">for</span> <span class="params">(int i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span> &#123;</span><br><span class="line">		int x = r.nextInt<span class="params">(<span class="number">1000</span> - <span class="number">10</span>)</span> + <span class="number">10</span>;</span><br><span class="line">		linkedSet.add<span class="params">(new Dog<span class="params">(x)</span>)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// end time</span></span><br><span class="line">	endTime = System.nanoTime<span class="params">()</span>;</span><br><span class="line">	duration = endTime - startTime;</span><br><span class="line">	System.out.println<span class="params">(<span class="string">"LinkedHashSet: "</span> + duration)</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从输出的结果可以清楚的知道，HashSet的add方法花费时间最少。</p>
<blockquote>
<p>HashSet: 2244768<br>TreeSet: 3549314<br>LinkedHashSet: 2263320</p>
</blockquote>
<p>*测试虽然不精确，但能反映基本思想TreeSet慢得多因为它是排好序的。</p>
<p><img src="/avatar/hashset-treeset-linkedhashset1.png" alt="Alt text"></p>
<p><a href="http://www.programcreek.com/2013/03/hashset-vs-treeset-vs-linkedhashset/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/05/Java中检查数组中是否存在某个值的方法/">
                Java中检查数组中是否存在某个值的方法
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-05
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/05/Java中检查数组中是否存在某个值的方法/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/05/Java中检查数组中是否存在某个值的方法/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>检查数组中是否存在某一个值的方法有三种方式<br>    foreach：for循环<br>    Arrays.asList(arr);<br>    Set</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * java中检查一个数组中是否含有某个值的方法</span><br><span class="line"> * @author cslience</span><br><span class="line"> *</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> class ArrayUtils &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//useLoop 推荐这种方法</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isContainsValueLoop(<span class="keyword">String</span>[] arr, <span class="keyword">String</span> targetValue) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">String</span> s : arr) &#123;</span><br><span class="line">			<span class="keyword">if</span>(s.equals(targetValue)) </span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//useList</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isContainsValueList(<span class="keyword">String</span>[] arr, <span class="keyword">String</span> targetValue) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> Arrays.asList(arr).contains(targetValue);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isContainsValueSet(<span class="keyword">String</span>[] arr, <span class="keyword">String</span> targetValue) &#123;</span><br><span class="line">		</span><br><span class="line">		Set&lt;<span class="keyword">String</span>&gt; <span class="built_in">set</span> = <span class="keyword">new</span> HashSet&lt;<span class="keyword">String</span>&gt;(Arrays.asList(arr));</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">set</span>.contains(targetValue);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//5,1k,10k  time complexity</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">String</span>[] arr = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>&#125;;</span><br><span class="line">		<span class="keyword">String</span> targetValue = <span class="string">"e"</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> begin = System.nanoTime();</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">			isContainsValueLoop(arr, targetValue);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">long</span> end = System.nanoTime();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">long</span> cost = end - begin;</span><br><span class="line">		</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"loop cost time = "</span> + cost/<span class="number">1000</span>);</span><br><span class="line">		</span><br><span class="line">		begin = System.nanoTime();</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">			isContainsValueSet(arr, targetValue);</span><br><span class="line">		&#125;</span><br><span class="line">		end = System.nanoTime();</span><br><span class="line">		</span><br><span class="line">		cost = end - begin;</span><br><span class="line">		</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"set cost time = "</span> + cost/<span class="number">1000</span>);</span><br><span class="line">		</span><br><span class="line">		begin = System.nanoTime();</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">			isContainsValueList(arr, targetValue);</span><br><span class="line">		&#125;</span><br><span class="line">		end = System.nanoTime();</span><br><span class="line">		</span><br><span class="line">		cost = end - begin;</span><br><span class="line">		</span><br><span class="line">		System.out.<span class="built_in">println</span>(<span class="string">"list cost time = "</span> + cost/<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/03/Java中PrintMap/">
                Java中PrintMap
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-03
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/03/Java中PrintMap/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/03/Java中PrintMap/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>给一个数组，统计某些值出现的次数，通过HashMap来处理</p>
<p>map的排序 HashMap是无序的，如果想给一个集合排序的话<br>有两种方式：<br>第一种：转换成TreeMap  ：使用比较器：按照key/value排序<br>第二种；转换成List  ：使用比较器：也可以按照key/value排序</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">import</span> java.util.Comparator;</span><br><span class="line"><span class="literal">import</span> java.util.HashMap;</span><br><span class="line"><span class="literal">import</span> java.util.<span class="built_in">Iterator</span>;</span><br><span class="line"><span class="literal">import</span> java.util.<span class="built_in">Map</span>;</span><br><span class="line"><span class="literal">import</span> java.util.TreeMap;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">PrintMap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	public <span class="literal">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/*String[] test = &#123;"a","a","a","a","b","b","c",&#125;;</span><br><span class="line">		Map&lt;String, Integer&gt; map = counterMap(test);</span><br><span class="line">		printMapForeach(map);</span><br><span class="line">		System.out.println("------------------------------");</span><br><span class="line">		printMap(map);*/</span></span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		sortTreeMapByValue();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="markdown">/**</span><br><span class="line"><span class="code">	 * 统一数组中各个值出现的次数</span></span><br><span class="line"><span class="code">	 * @param strArray</span></span><br><span class="line"><span class="code">	 */</span></span></span></span><br><span class="line">	public <span class="literal">static</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Integer&gt; counterMap(<span class="built_in">String</span>[] strArray) &#123;</span><br><span class="line">		HashMap&lt;<span class="built_in">String</span>, Integer&gt; countMap = <span class="keyword">new</span> HashMap&lt;<span class="built_in">String</span>, Integer&gt;();</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">String</span> a : strArray) &#123;</span><br><span class="line">			<span class="keyword">if</span>(countMap.keySet().contains(a))&#123;</span><br><span class="line">				countMap.put(a, countMap.<span class="literal">get</span>(a)+<span class="number">1</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				countMap.put(a, <span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> countMap;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//HashMap 无序的 无法直接排序--需要转换list  Collections.sort(list,Comparator);</span></span><br><span class="line">	public <span class="literal">static</span> <span class="keyword">void</span> sortHashMapByKey() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public <span class="literal">static</span> <span class="keyword">void</span> sortHashMapByValue() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//TreeMap 有序的  new TreeMap(new Comparator())</span></span><br><span class="line">	public <span class="literal">static</span> <span class="keyword">void</span> sortTreeMapByValue() &#123;</span><br><span class="line">		HashMap&lt;<span class="built_in">String</span>, Integer&gt; countMap = <span class="keyword">new</span> HashMap&lt;<span class="built_in">String</span>, Integer&gt;();</span><br><span class="line">		<span class="comment">//add a lot of entries</span></span><br><span class="line">		countMap.put(<span class="string">"a"</span>, <span class="number">10</span>);</span><br><span class="line">		countMap.put(<span class="string">"b"</span>, <span class="number">20</span>);</span><br><span class="line">		 </span><br><span class="line">		ValueComparator vc =  <span class="keyword">new</span> ValueComparator(countMap);</span><br><span class="line">		TreeMap&lt;<span class="built_in">String</span>,Integer&gt; sortedMap = <span class="keyword">new</span> TreeMap&lt;<span class="built_in">String</span>,Integer&gt;(vc);</span><br><span class="line">		 </span><br><span class="line">		sortedMap.putAll(countMap);</span><br><span class="line">		printMap(sortedMap);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="markdown">/**</span><br><span class="line"><span class="code">	 * 打印map</span></span><br><span class="line"><span class="code">	 * @param mp</span></span><br><span class="line"><span class="code">	 */</span></span></span></span><br><span class="line">	public <span class="literal">static</span> <span class="keyword">void</span> printMap(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Integer&gt; mp) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">Iterator</span>&lt;?&gt; it = mp.entrySet().iterator();</span><br><span class="line">		<span class="keyword">while</span>(it.hasNext()) &#123;</span><br><span class="line">			<span class="annotation">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">			<span class="built_in">Map</span>.Entry&lt;<span class="built_in">String</span>, Integer&gt; pairs = (<span class="built_in">Map</span>.Entry&lt;<span class="built_in">String</span>, Integer&gt;) it.next();</span><br><span class="line">			System.out.println(pairs.getKey() + <span class="string">" = "</span> + pairs.getValue());</span><br><span class="line">			it.remove();<span class="comment">//移除该元素</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment"><span class="markdown">/**</span><br><span class="line"><span class="code">	 * foreach 打印map</span></span><br><span class="line"><span class="code">	 * @param mp</span></span><br><span class="line"><span class="code">	 */</span></span></span></span><br><span class="line">	public <span class="literal">static</span> <span class="keyword">void</span> printMapForeach(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Integer&gt; mp) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">Map</span>.Entry&lt;<span class="built_in">String</span>, Integer&gt; entry : mp.entrySet()) &#123;</span><br><span class="line">			System.out.println(entry.getKey() + <span class="string">" = "</span> + entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValueComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Integer&gt; base;</span><br><span class="line"></span><br><span class="line">	public ValueComparator(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Integer&gt; base) &#123;</span><br><span class="line">		<span class="keyword">this</span>.base = base;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	public <span class="built_in">int</span> compare(<span class="built_in">String</span> key1, <span class="built_in">String</span> key2) &#123;</span><br><span class="line">		<span class="keyword">return</span> base.<span class="literal">get</span>(key1) - base.<span class="literal">get</span>(key2);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/02/Java中如何把Array转化成ArrayList/">
                Java中如何把Array转化成ArrayList
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-02
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/02/Java中如何把Array转化成ArrayList/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/02/Java中如何把Array转化成ArrayList/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>本文分析了在Stack Overflow上的问题的答案。问这个问题的人得到了很多的赞，这可以让他有权限做大量的事情在Stack Overflow。这对我来说不是很有意义，但是让我们先来看看这个问题吧。</p>
<p>**问题是：如何将下面的 数组转换成ArrayList集合？</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Element<span class="keyword">[</span>]<span class="instruction"> array </span>= &#123;new<span class="function"> Element(</span>1<span class="function">)</span>,new<span class="function"> Element(</span>2<span class="function">)</span>,new<span class="function"> Element(</span>3<span class="function">)</span> &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="1-_最流行和被接受的答案">1. 最流行和被接受的答案</h2><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Element&gt; arrayList = new ArrayList&lt;Element&gt;<span class="list">(<span class="keyword">Arrays</span>.asList<span class="list">(<span class="keyword">array</span>)</span>)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>首先，我们看下Java Doc中关于ArrayList的构造函数的描述：</p>
<pre><code>&gt; <span class="type">ArrayList</span>(<span class="type">Collection</span> &lt; ? extends E &gt; c) : <span class="type">Constructs</span> a list containing the elements <span class="keyword">of</span> the specified collection, <span class="keyword">in</span> the order they are returned by the collection's <span class="keyword">iterator</span>.
</code></pre><p>所以构造函数做了下面两件事：</p>
<ol>
<li>把Collection转换成Array</li>
<li>复制Array到ArrayList自己的备份数组“elementData”中<br>下面是ArrayList的构造器的源代码</li>
</ol>
<figure class="highlight roboconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="component">public ArrayList(Collection&lt;? <span class="keyword">extends</span> E&gt; c ) &#123;</span><br><span class="line">		elementData = c<span class="string">.toArray()</span>;</span><br><span class="line">		size = elementData<span class="string">.length</span>;</span><br><span class="line">		if(elementData<span class="string">.getClass()</span> != Object[]<span class="string">.class)</span> &#123;</span><br><span class="line">				elementData = Arrays<span class="string">.copyOf(elementData</span>, size, Object[]<span class="string">.class)</span>;</span><br><span class="line">		&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-_第二流行的答案">2. 第二流行的答案</h2><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span><span class="subst">&lt;</span>Element<span class="subst">&gt;</span> <span class="built_in">list</span> <span class="subst">=</span> Arrays<span class="built_in">.</span>asList(<span class="built_in">array</span>);</span><br></pre></td></tr></table></figure>
<p>这不是最好的，因为从aslist()返回list的大小是固定的。实际上返回的list是不java.util.ArrayList，而是私有静态类内部定义的java.util.Arrays。我们知道ArrayList基本实现为一个Array，从aslist()返回的list是由原来的Array返回的一个固定大小的list。这样，如果从返回的list中添加或删除元素，将抛出UnsupportedOperationException。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">list</span>.<span class="built_in">add</span>(<span class="keyword">new</span> Element(<span class="number">4</span>));</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java<span class="class">.lang</span><span class="class">.ClassCastException</span>: java<span class="class">.util</span><span class="class">.Arrays</span><span class="variable">$ArrayList</span> cannot be cast to java<span class="class">.util</span><span class="class">.ArrayList</span></span><br><span class="line">	at collection<span class="class">.ConvertArray</span><span class="class">.main</span>(ConvertArray<span class="class">.java</span>:<span class="number">22</span>)</span><br></pre></td></tr></table></figure>
<h2 id="3-_另外一个的答案">3. 另外一个的答案</h2><p>这个答案来自于网友的评论</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Element<span class="keyword">[</span>]<span class="instruction"> array </span>= &#123;new<span class="function"> Element(</span>1<span class="function">)</span>,<span class="instruction"> new </span>Element(2<span class="function">)</span>&#125;;</span><br><span class="line">List&lt;element&gt; list =<span class="instruction"> new </span>ArrayList&lt;element&gt;(array.length<span class="function">)</span>;</span><br><span class="line">Collections.addAll(list, array<span class="function">)</span>;</span><br></pre></td></tr></table></figure>
<p><a href="http://www.programcreek.com/2013/04/how-to-convert-array-to-arraylist-in-java/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
  </div>

  
  <div class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">&raquo;</a>
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/avatar/yihu.jpg" alt="Cao Sai" />
          <p class="site-author-name">Cao Sai</p>
        </div>
        <p class="site-description motion-element">To err is human; to forgive, divine.</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">23</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/caosai" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/cslience" target="_blank">Weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.jianshu.com/users/d87ba011ebff/timeline" target="_blank">JianShu</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/zero/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-zero.svg" alt="Creative Commons" />
            </a>
          </div>
        

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Cao Sai</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"caosai"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  

</body>
</html>
