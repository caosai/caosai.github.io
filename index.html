<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


  <meta name="google-site-verification" content="VvyjvVXcJQa0QklHipu6pwm2PJGnnchIqX7s5JbbT_0" />





  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>


    <meta name="description" content="To err is human; to forgive, divine." />



  <meta name="keywords" content="CAO,Going" />



  <link rel="alternate" href="/atom.xml" title="Courage Me" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b56ed77ba442f0ae3cb743e752e28a87";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <title> Courage Me </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Courage Me</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            <i class="menu-item-icon icon-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook">
            <i class="menu-item-icon icon-guestbook"></i> <br />
            留言
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html">
            <i class="menu-item-icon icon-commonweal"></i> <br />
            公益404
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'PL96x7fVNTKfxFRsKqT8','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <div id="posts" class="posts-expand">
    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/08/18/java-BigInteger-to-string/">
                java BigInteger to string
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-08-18
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/java/">java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/08/18/java-BigInteger-to-string/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/18/java-BigInteger-to-string/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>从数据库取出一个字段的值,赋值给自己的创建的变量，出现如下异常告警：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java<span class="class">.lang</span><span class="class">.ClassCastException</span>: java<span class="class">.math</span><span class="class">.BigInteger</span> cannot be cast to java<span class="class">.lang</span><span class="class">.String</span></span><br></pre></td></tr></table></figure></p>
<p>后来发现原来在mysql中建表的时候，设置字段的类型为bigint型<br>我在代码中要转成Integer类型的时候用到：<br>Integer.parseInt((String)map.get(vaule))；这句报错</p>
<p>具体的解决方案：通过Object封装作为中间层进行转换</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object <span class="variable">ob =</span> <span class="built_in">map</span>.get(keyField);</span><br><span class="line">Integer.parseInt(ob.<span class="built_in">toString</span>());</span><br></pre></td></tr></table></figure>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/08/18/mysql保留关键字和表字段冲突/">
                mysql保留关键字和表字段冲突
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-08-18
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Mysql/">Mysql</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/08/18/mysql保留关键字和表字段冲突/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/18/mysql保留关键字和表字段冲突/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>mysql数据库表的字段名称不能和数据库本身的保留关键字相同<br>问题：插入数据库的sql报异常，检查了好多遍没发现到底是啥原因，问题如下：<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Thread-<span class="number">6</span> ERROR [com.sdk.biz.snowfox.common.db.SaveCacheToDB] doBatchDB <span class="number">1</span> exception: </span><br><span class="line">java.sql.SQLException: You have <span class="operator">an</span> error <span class="operator">in</span> your SQL syntax; check <span class="operator">the</span> manual that corresponds <span class="built_in">to</span> your MySQL server <span class="built_in">version</span> <span class="keyword">for</span> <span class="operator">the</span> <span class="constant">right</span> syntax <span class="built_in">to</span> use near <span class="string">'desc,create_time) values('</span>t<span class="string">','</span><span class="operator">a</span><span class="string">','</span>d<span class="string">','</span>o<span class="string">','</span><span class="operator">a</span><span class="string">','</span>test<span class="string">','</span><span class="number">2015</span>-<span class="number">08</span>-<span class="number">14</span> <span class="number">19</span>:<span class="number">25</span>:<span class="number">35</span><span class="string">')'</span> <span class="keyword">at</span> <span class="built_in">line</span> <span class="number">1</span> Query: insert ignore <span class="keyword">into</span> testTable(ptxId,userId,txId,priceId,statusCode,desc,create_time) values(?,?,?,?,?,?,?); Parameters: [[t, <span class="operator">a</span>, d, o, <span class="operator">a</span>, test, <span class="number">2015</span>-<span class="number">08</span>-<span class="number">14</span> <span class="number">19</span>:<span class="number">21</span>:<span class="number">04</span>], [t, <span class="operator">a</span>, d, o, <span class="operator">a</span>, test, <span class="number">2015</span>-<span class="number">08</span>-<span class="number">14</span> <span class="number">19</span>:<span class="number">25</span>:<span class="number">35</span>]]</span><br><span class="line">	<span class="keyword">at</span> org.apache.commons.dbutils.AbstractQueryRunner.rethrow(AbstractQueryRunner.java:<span class="number">392</span>) ~[commons-dbutils-<span class="number">1.6</span>.jar:<span class="number">1.6</span>]</span><br><span class="line">	<span class="keyword">at</span> org.apache.commons.dbutils.QueryRunner.batch(QueryRunner.java:<span class="number">155</span>) ~[commons-dbutils-<span class="number">1.6</span>.jar:<span class="number">1.6</span>]</span><br><span class="line">	<span class="keyword">at</span> org.apache.commons.dbutils.QueryRunner.batch(QueryRunner.java:<span class="number">92</span>) ~[commons-dbutils-<span class="number">1.6</span>.jar:<span class="number">1.6</span>]</span><br><span class="line">	<span class="keyword">at</span> com.sdk.core.jdbc.DBUtils.batch(DBUtils.java:<span class="number">405</span>) ~[classes/:na]</span><br><span class="line">	<span class="keyword">at</span> com.sdk.core.jdbc.DBModel.batch(DBModel.java:<span class="number">64</span>) ~[classes/:na]</span><br></pre></td></tr></table></figure></p>
<p>仔细看上面的报错原因：You have an error in your SQL syntax，use near ‘desc,create_time)<br>sql语法错误，在desc这个字段附近。不注意还真不知道到底为啥会出现这种错误，后来在本地测试出现一样的问题。<br>找同事过来帮忙看原因也是一头雾水，后来终于发现，原因这个desc和mysql数据库中的排序关键字冲突了。</p>
<p>解决方案：1、修改字段名称desc，如desc_name，以后建表的时候要注意不要使用关键字了。<br>2、insert ignore into sdk_callback_pulzesdk(ptxId,userId,txId,priceId,statusCode,<code>desc</code>,create_time)<br> values(‘a’,’b’,’c’,’d’,’e’,’test’, ‘2015-08-14 19:21:04’)<br>注意desc和其他字段的区别，多了两个符号括起来。就是键盘上数字键的前面那个键盘上的符号（不晓得名字了）</p>
<p>总结：遇到问题，解决问题的过程是相当苦逼的，并且遇到这种坑爹的问题，更是要细心，成长的过程就是这么酸爽。下次建表的时候要长点心了！</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/08/03/Top-10-Java中Strings的常见问题/">
                Top 10 Java中Strings的常见问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-08-03
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Top-10-Series/">Top 10 Series</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/08/03/Top-10-Java中Strings的常见问题/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/03/Top-10-Java中Strings的常见问题/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>下面是关于Java String最常见的10个问题</p>
<h2 id="1-_如何比较String类型的变量？用“==”还是equals()?">1. 如何比较String类型的变量？用“==”还是equals()?</h2><p>简言之，“==”用于测试引用是否相等，equals()测试值是否相等。如果你想检查两个string是不是同一个对象，你需要使用equals()方法。<br>如果你知道String的intering(link)概念就更好了。</p>
<h2 id="2-_为什么说char[]比string好对于安全敏感的信息来说？">2. 为什么说char[]比string好对于安全敏感的信息来说？</h2><p>String是不可变长的，这就意味着一旦被创建，就不会改变直到垃圾回收掉。用一个数组你可以显式的更改它的元素值。用这种方式，安全敏感信息（像密码）将不会被显式在系统中。</p>
<h2 id="3-_在switch语句中可以使用string吗？">3. 在switch语句中可以使用string吗？</h2><p>从JDK1.7开始，我们可以使用string作为switch语句的条件。<br><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java 7 </span></span><br><span class="line"><span class="keyword">switch</span>(str.toLowerCase()) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">"a"</span>:</span><br><span class="line">		<span class="keyword">value</span> = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">"b"</span>:</span><br><span class="line">		<span class="keyword">value</span> = <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="4-_如何将string转换成int？">4. 如何将string转换成int？</h2><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n = Integer.parseInt(<span class="string">"10"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="5-_如何用空格分割一个字符串？">5. 如何用空格分割一个字符串？</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String[] </span><span class="keyword">strArray </span>= aString.split(<span class="string">"\\s+"</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-_substring()方法到底是干什么用的？">6. substring()方法到底是干什么用的？</h2><p>在JDK1.6中，substring()方法引用一个已经存在的string的字符数组，而不是重新创建一个。创建一个新的string代表一个新的字符数组。你可以+一个空字符串来创建一个新的string<br><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span>.substring<span class="params">(m, n)</span> + <span class="string">""</span>;</span><br></pre></td></tr></table></figure></p>
<p>这句代码将会创建一个新的字符数组来表示一个新的string，有时候这种方式会使你的代码更快，因为垃圾回收器可以收集不用的大的string并且只保留其sub string.</p>
<h2 id="7-_String_vs_StringBuffer_vs_StringBuilder">7. String vs StringBuffer vs StringBuilder</h2><p>String vs StringBuilder:StringBuilder是可变长的，这就意味着你可以在创建一个字符串后修改它。StringBuilder vs StringBuilder: StringBuffer是同步的，也就是说是线程安全的，但是比StringBuilder速度慢。</p>
<h2 id="8-_如何重复一个string？">8. 如何重复一个string？</h2><p>在Python中我们可以用一个数字就可以重复一个string。Java中，我们可以使用Apache的StringUtils.repeat()方法。<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span> <span class="built_in">str</span> = <span class="string">"adcs"</span>;</span><br><span class="line"><span class="keyword">String</span> repeated = StringUtils.repeat(<span class="built_in">str</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="9-_如何将字符串转换成日期类型？">9. 如何将字符串转换成日期类型？</h2><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> str <span class="subst">=</span> <span class="string">"Sep 17, 2013"</span>;</span><br><span class="line"><span class="built_in">Date</span> <span class="built_in">date</span> <span class="subst">=</span> <span class="literal">new</span> SimpleDateFormat(<span class="string">"MMMM d, yy"</span>, <span class="built_in">locale</span><span class="built_in">.</span>ENGLISH)<span class="built_in">.</span>parse(str);</span><br></pre></td></tr></table></figure>
<h2 id="10-_如何计数一个char在一个string中出现的次数？">10. 如何计数一个char在一个string中出现的次数？</h2><p>使用Apache的StringUtils类的方法<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n = StringUtils.countMatches(<span class="string">"111222"</span>, <span class="string">"1"</span>);</span><br></pre></td></tr></table></figure></p>
<p><a href="www.programcreek.com/2013/09/top-10-faqs-of-java-strings/">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/08/03/LittleSummry/">
                LittleSummry
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-08-03
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/summry-life/">summry life</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/08/03/LittleSummry/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/03/LittleSummry/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>2015年转眼间已经过了一大半了，生活继而有了很大的变化，而不是改善，当初为了自己所谓的梦想和追求，走了出来，虽说不后悔，却也有些伤感。一方面在收支上直接跟财政挂钩，搞了个财政赤字出来。另一方面在学习上，虽然学习了很多东西，实际上并没有想象中学到的多而且深入。理想和现实之间总有无法逾越的鸿沟，即使计划的总体安排是这样，但是并没有起到太多决定性的作用。</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/20/Top-10-Java常见的Exceptions/">
                Top 10 Java常见的Exceptions
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-20
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Top-10-Series/">Top 10 Series</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/20/Top-10-Java常见的Exceptions/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/20/Top-10-Java常见的Exceptions/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>这篇文章总结了关于Java Exceptions 10个最常被问的问题</p>
<h2 id="1-_Checked_vs_UnChecked">1. Checked vs UnChecked</h2><p>简言之，检查异常必须在一个方法中被显式捕获，或者在方法的throws从句中被声明。非检查时异常是由于除数为0、空指针异常等问题导致的。非检查时异常特别重要，因为你希望其他使用你的API的开发者知道如何处理这些异常。<br>例如，IOException是一种常见的检查时异常，运行时异常是一种非检查时异常。在读余下的文章之前你可以看下<a href="http://www.programcreek.com/2009/02/diagram-for-hierarchy-of-exception-classes/" target="_blank" rel="external">Java Exception Hierarchy Diagram</a></p>
<h2 id="2-_管理异常的最佳实践">2. 管理异常的最佳实践</h2><p>如果一个Exception可以被合理的处理，那么它就应该被caught，否则就应该被thrown抛出。</p>
<h2 id="3-_为什么在try中声明的变量不能在catch和finally语句块的中被调用？">3. 为什么在try中声明的变量不能在catch和finally语句块的中被调用？</h2><p>下面的代码中，字符串s在try块中被声明，不能被用在catch从句中。如下代码不能通过编译。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="keyword">File</span> <span class="keyword">file</span> = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"path"</span>);</span><br><span class="line">	FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">file</span>);</span><br><span class="line">	String s = <span class="string">"insideTry"</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span>(FileNotFoundException e)&#123;</span><br><span class="line">	e.printStactTrace();</span><br><span class="line">	System.out.<span class="keyword">print</span>(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原因是你不知道在try语句块中Exception什么时候被抛出。对于一些特殊的例子来说，异常很有可能会在对象声明之前被抛出。</p>
<h2 id="4-_为什么Double-parseDouble(null)和Integer-parseInt(null)抛出不同的异常?">4. 为什么Double.parseDouble(null)和Integer.parseInt(null)抛出不同的异常?</h2><p>首先，它们确实抛出不同的异常。这是JDK的问题，主要是它们是不同的开发人员开发的，不用多想。<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer.parseInt(<span class="keyword">null</span>);</span><br><span class="line"><span class="comment">//throws java.lang.NumberFormatException: null</span></span><br><span class="line"><span class="keyword">Double</span>.parseDouble(<span class="keyword">null</span>);</span><br><span class="line"><span class="comment">//throws java.lang.NullPointerException</span></span><br></pre></td></tr></table></figure></p>
<h2 id="5-_Java中常见的运行时异常">5. Java中常见的运行时异常</h2><p>这里给出一部分，IllegalArgumentException，ArrayIndexOutBoundsException<br>它们可以用于如下语句条件不满足的时候。<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"obj can not be null"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="6-_我们可以在一个catch从句中捕捉多个Exception吗？">6. 我们可以在一个catch从句中捕捉多个Exception吗？</h2><p>答案是肯定的。只要这些异常类在类的继承中都继承同一个父类，你可以只用父类就可以了。</p>
<h2 id="7-_Java中构造函数可以抛出异常吗？">7. Java中构造函数可以抛出异常吗？</h2><p>答案是肯定的，构造函数是一种特殊的函数。</p>
<h2 id="8-_在finally从句中抛出异常。">8. 在finally从句中抛出异常。</h2><p>做下面的处理是合法的<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> mani(String[] args) &#123;</span><br><span class="line">	<span class="keyword">File</span> file1 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"path1"</span>);</span><br><span class="line">	<span class="keyword">File</span> file2 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"path2"</span>);</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		FileInputStream fis = <span class="keyword">new</span> FileInputStream(file1);</span><br><span class="line">	&#125;<span class="keyword">catch</span>(FileNotFoundException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			FileInputStream fis = <span class="keyword">new</span> FileInputStream(file2);</span><br><span class="line">		&#125;<span class="keyword">catch</span>(FileNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();	</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>但是要有更好的代码可读性，你应该把嵌入式的try-catch块包起来作为一种新方法，然后将方法调用放在finally一个子句中。<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> mani(String[] args) &#123;</span><br><span class="line">	<span class="keyword">File</span> file1 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"path1"</span>);</span><br><span class="line">	<span class="keyword">File</span> file2 = <span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"path2"</span>);</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		FileInputStream fis = <span class="keyword">new</span> FileInputStream(file1);</span><br><span class="line">	&#125;<span class="keyword">catch</span>(FileNotFoundException e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">		methodThrowException();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="9-_在finally语句块中可以用return关键字吗？">9. 在finally语句块中可以用return关键字吗？</h2><p>可以。</p>
<h2 id="10-_为什么开发者默认处理异常？">10. 为什么开发者默认处理异常？</h2><pre><code>有这么多的时间段类似的代码段发生。如果正确处理异常是非常重要的，为什么开发人员一直这样做？
</code></pre><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	....</span><br><span class="line">&#125;<span class="keyword">catch</span>(<span class="built_in">Exception</span> <span class="literal">e</span>) &#123;</span><br><span class="line">	<span class="literal">e</span>.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>忽略虽然很容易。频繁发生并不意味着正确性。</p>
<p><a href="http://www.programcreek.com/2013/10/top-10-questions-about-java-exceptions/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/16/Top-10-Java中常用于Array的方法/">
                Top 10 Java中常用于Array的方法
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-16
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Top-10-Series/">Top 10 Series</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/16/Top-10-Java中常用于Array的方法/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/16/Top-10-Java中常用于Array的方法/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>下面是经常在Java Array中用到的10个方法。在StackOverFlow上被提出最多的问题。</p>
<h2 id="1-_声明一个数组">1. 声明一个数组</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>[] aArray = <span class="keyword">new</span> <span class="built_in">String</span>[<span class="number">5</span>];</span><br><span class="line"><span class="built_in">String</span>[] bArray = &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>&#125;;</span><br><span class="line"><span class="built_in">String</span>[] cArray = <span class="keyword">new</span> <span class="built_in">String</span>[]&#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="2-_打印一个数组">2. 打印一个数组</h2><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int[] intArray = &#123; 1, 2, 3, 4, 5 &#125;;</span><br><span class="line">String intArrayString = Arrays.<span class="keyword">toString</span>(intArray);</span><br><span class="line">System.<span class="keyword">out</span>.println(intArray);</span><br><span class="line"><span class="comment">// [I@7150bd4d</span></span><br><span class="line">System.<span class="keyword">out</span>.println(intArrayString);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//foreach</span></span><br><span class="line"><span class="keyword">for</span>(int <span class="keyword">n</span> : intArray) &#123;</span><br><span class="line">	System.<span class="keyword">out</span>.<span class="keyword">print</span>(<span class="keyword">n</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-_用array创建一个list">3. 用array创建一个list</h2><p><strong>Arrays.asList(stringArray)</strong>传入一个数组，返回一个list<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span>[] stringArray = &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span> &#125;;</span><br><span class="line">ArrayList&lt;<span class="keyword">String</span>&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;(Arrays.asList(stringArray));</span><br><span class="line">System.out.<span class="built_in">println</span>(arrayList);</span><br><span class="line"><span class="comment">// [a, b, c, d, e]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="4-_连接两个数组(首尾连接)">4. 连接两个数组(首尾连接)</h2><p>用到apache一个jar包   commons-lang3-3.4.jar<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">int</span>[] intArray2 = &#123; <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line"><span class="keyword">int</span>[] combinedIntArray = ArrayUtils.addAll(intArray, intArray2);</span><br><span class="line"><span class="comment">// combinedIntArray &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10 &#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="5-_数组中插入分割字符">5. 数组中插入分割字符</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// containing the provided list of elements</span></span><br><span class="line"><span class="comment">// Apache common lang</span></span><br><span class="line"><span class="keyword">String</span> j = StringUtils.<span class="built_in">join</span>(<span class="keyword">new</span> <span class="keyword">String</span>[] &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span> &#125;, <span class="string">"|"</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(j);</span><br><span class="line"><span class="comment">// a| b| c</span></span><br></pre></td></tr></table></figure>
<h2 id="6-_ArrayList_转换_Array">6. ArrayList 转换 Array</h2><p>思路：用到List.toArray(array)方法<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">String</span>[] stringArray = &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span> &#125;;</span><br><span class="line">ArrayList&lt;<span class="keyword">String</span>&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;<span class="keyword">String</span>&gt;(Arrays.asList(stringArray));</span><br><span class="line"><span class="comment">//创建一个和list的大小一致的空的数组</span></span><br><span class="line"><span class="keyword">String</span>[] stringArr = <span class="keyword">new</span> <span class="keyword">String</span>[arrayList.<span class="built_in">size</span>()];</span><br><span class="line"><span class="comment">//list 2 array</span></span><br><span class="line">arrayList.toArray(stringArr);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">String</span> s : stringArr)</span><br><span class="line">	System.out.<span class="built_in">println</span>(s);</span><br></pre></td></tr></table></figure></p>
<h2 id="7-_Array转换Set">7. Array转换Set</h2><p>set的构造函数可传入一个集合<br>  array to list  ;  new HsahSet(list)<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//set是无序的</span></span><br><span class="line"><span class="built_in">Set</span>&lt;<span class="built_in">String</span>&gt; <span class="literal">set</span> = <span class="keyword">new</span> HashSet&lt;<span class="built_in">String</span>&gt;(Arrays.asList(stringArray));</span><br><span class="line">System.out.println(<span class="literal">set</span>);</span><br><span class="line"><span class="comment">//[d, e, b, c, a]</span></span><br></pre></td></tr></table></figure></p>
<h2 id="8-_反转Array">8. 反转Array</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">ArrayUtils.<span class="keyword">reverse</span>(intArray);</span><br><span class="line">System.out.<span class="keyword">println</span>(Arrays.toString(intArray));</span><br><span class="line"><span class="comment">//[5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
<h2 id="9-_数组中删除一个元素">9. 数组中删除一个元素</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="comment">//create a new array</span></span><br><span class="line"><span class="keyword">int</span>[] removed = ArrayUtils.removeElement(intArray, <span class="number">3</span>);</span><br><span class="line">System.<span class="keyword">out</span>.println(Arrays.toString(removed));</span><br></pre></td></tr></table></figure>
<h2 id="10-_检查数组中是否包含某个值">10. 检查数组中是否包含某个值</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String[] stringArray = &#123; <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span> &#125;;</span><br><span class="line"><span class="keyword">boolean</span> b = Arrays.<span class="keyword">asList</span>(stringArray).contains(<span class="string">"a"</span>);</span><br><span class="line">System.out.<span class="keyword">println</span>(b);</span><br><span class="line"><span class="comment">//return true</span></span><br><span class="line"><span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">boolean</span> a = Arrays.<span class="keyword">asList</span>(numbers).contains(<span class="number">1</span>);</span><br><span class="line">System.out.<span class="keyword">println</span>();</span><br><span class="line"><span class="comment">//return false;</span></span><br></pre></td></tr></table></figure>
<p>上述String[]返回true，然而int[]却返回false。原因是Arrays.asList(array)这个方法的返回值类型。<br>当array是int类型的时候，返回的是List<int[]>，而不是List<integer>。所以传入的值不会和int[]相等的。<br>此方法 不适用于int[]。</integer></int[]></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/12/Java中equals-和hashCode-的契约/">
                Java中equals()和hashCode()的契约
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-12
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/12/Java中equals-和hashCode-的契约/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/12/Java中equals-和hashCode-的契约/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p><img src="/avatar/java-hashcode.png" alt="Alt text"><br>Java的父类 java.lang.Object 有两个很重要的方法被定义如下：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public boolean <span class="function"><span class="title">equals</span><span class="params">(Object obj)</span></span></span><br><span class="line">public int <span class="function"><span class="title">hashCode</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></p>
<p>它们已经被证明非常重要去理解，特别当用户自定义的对象被add到Maps中。然后，即使是高级开发者有时候也不知道如何合理的使用这两个方法。这篇文章中，我首先举一个经常犯的错误的例子，并解释hashCode和equals是如何起作用的。</p>
<h2 id="1-_一个常见的错误">1. 一个常见的错误</h2><p>常见的错误如下例子<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.<span class="keyword">HashMap</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class Apple &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> Apple(<span class="keyword">String</span> <span class="built_in">color</span>) &#123;</span><br><span class="line">		<span class="keyword">this</span>.<span class="built_in">color</span> = <span class="built_in">color</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> obj) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Apple))</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;	</span><br><span class="line">		<span class="keyword">if</span> (obj == <span class="keyword">this</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.<span class="built_in">color</span>.equals(((Apple) obj).<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		Apple a1 = <span class="keyword">new</span> Apple(<span class="string">"green"</span>);</span><br><span class="line">		Apple a2 = <span class="keyword">new</span> Apple(<span class="string">"red"</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="comment">//hashMap stores apple type and its quantity</span></span><br><span class="line">		<span class="keyword">HashMap</span>&lt;Apple, Integer&gt; m = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;Apple, Integer&gt;();</span><br><span class="line">		m.put(a1, <span class="number">10</span>);</span><br><span class="line">		m.put(a2, <span class="number">20</span>);</span><br><span class="line">		System.out.<span class="built_in">println</span>(m.<span class="built_in">get</span>(<span class="keyword">new</span> Apple(<span class="string">"green"</span>)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，一个green苹果对象被成功的存在一个HashMap中，但是当在map中查询此对象的时候，这个对象没有被找到。程序结果是null。然而我们可以确定的是在debugger中该对象确实存在HashMap中。<br><img src="/avatar/hashCode-and-equals-contract.png" alt="Alt text"></p>
<h2 id="2-_问题是由hashCode()引起的">2. 问题是由hashCode()引起的</h2><p>这个问题是由于没有重写hashCode()方法。hashCode和equals中的契约是这样的：</p>
<ol>
<li>如果两个对象相等，它们必须有相同的hashcode值。</li>
<li>如果两个对象有相同的hashcode值，它们可能相等也可能不相等。</li>
</ol>
<p>Map背后的思想是能找比线性搜索更快的找到一个对象。使用散列键值来定位对象有两步过程。map内部存储对象作为一个数组的数组。第一个数组的索引就是键的hashCode的值。位于第二个数组通过线性搜索根据equals()来判断该对象是否被找到。</p>
<p>对象类的默认实现了hashcode()方法并返回不同的整数对于不同的对象来说。因此，在上面的例子中，不同的对象（即使同一类型）都有不同的hashCode值。</p>
<p>hashcode就像是一个序列的仓库存储，不同的东西可以存储在不同的仓库中。如果你把材料组织到不同的地方，而不是同一个仓库，那就更有效了。所以这是平均分配的hashCode值的一个很好的实践。（虽然不是主要的观点）。</p>
<p>解决方案就是在类中添加hashCode()方法，这里我只是使用color字符串的长度做示范。<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.color.length();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.programcreek.com/2011/07/java-equals-and-hashcode-contract/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/08/Top关于Java中Map的9种常见问题/">
                Top关于Java中Map的9种常见问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-08
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/08/Top关于Java中Map的9种常见问题/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/08/Top关于Java中Map的9种常见问题/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>总的来说，Map是一种集合的数据结构有key-value对组成，每一个key可以在Map中出现一次。这篇文章总结了Java中Map最常用的9种使用方法。为了简单起见，我将在例子中使用泛型。因此我只使用Map而不使用具体的Map。但是你可以假设K和V都实现了Comparable接口。</p>
<h2 id="0-_Map2List_Map转化成List">0. Map2List Map转化成List</h2><p>Java中，Map接口提供三种集合：key集合、value结合、和key-value结合。它们都可以转化成一个List通过一个构造器或者addAll()方法。下面的代码片段展示了如何使用构造器创建通过Map创建一个ArrayList。</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//keyList</span></span><br><span class="line"><span class="built_in">List</span> keyList <span class="subst">=</span> ArrayList(<span class="built_in">map</span><span class="built_in">.</span>keySet());</span><br><span class="line"><span class="comment">//valueList</span></span><br><span class="line"><span class="built_in">List</span> valueList <span class="subst">=</span> ArrayList(<span class="built_in">map</span><span class="built_in">.</span>valueSet());</span><br><span class="line"><span class="comment">//entryList key-value set</span></span><br><span class="line"><span class="built_in">List</span> entryList <span class="subst">=</span> ArrayList(<span class="built_in">map</span><span class="built_in">.</span>entrySet());</span><br></pre></td></tr></table></figure>
<h2 id="1-_在Map中遍历每一个Entry">1. 在Map中遍历每一个Entry</h2><p>通过一个键值对迭代遍历一个Map是最基本的操作。在Java，键值对存储在Map中被称为Map.Entry。Map.entrySet()返回一个键值对的集合，因此要通过一个Map的每一个entry是最有效的方式来遍历map</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">for</span>(<span class="preprocessor">Entry</span> <span class="preprocessor">entry</span> : <span class="preprocessor">map</span>.entrySet()) &#123;</span><br><span class="line">	K key = <span class="preprocessor">entry</span>.getKey()<span class="comment">;</span></span><br><span class="line">	V value = <span class="preprocessor">entry</span>.getValue()<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在JDK1.5以前还可以一下方式遍历Map</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Iterator </span><span class="keyword">it </span>= <span class="preprocessor">map</span>.entrySet().<span class="keyword">iterator();</span><br><span class="line"></span><span class="label">while</span>(<span class="keyword">it.hasNext()) </span>&#123;</span><br><span class="line">	<span class="preprocessor">Entry</span> <span class="preprocessor">entry</span> = <span class="keyword">it.next();</span><br><span class="line"></span>	K key = <span class="preprocessor">entry</span>.getKey()<span class="comment">;</span></span><br><span class="line">	V value = <span class="preprocessor">entry</span>.getValue()<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-_根据key在Map中排序">2. 根据key在Map中排序</h2><p>根据key排序Map是一个经常用到的操作。一个方法是将Map.Entry放进List中，使用一个比较器Comparator来排序value。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List <span class="built_in">list</span> = <span class="keyword">new</span> ArrayList(<span class="built_in">map</span>.entrySet());</span><br><span class="line">Collections.sort(<span class="built_in">list</span>,<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">	@<span class="function">Override</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Entry e1, Entry e2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> e1.getKey().compareTo(e2.getKey());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>另外一种方法是使用排好序的Map，可以根据key值进行自动排序。因此所有的key值必须要实现Comparable接口或者可以被一个Comparator接受。<br>一种实现了SortMap的类是TreeMap。它的构造器可以接受一个Comparator。下面的代码展示了如何将一个map转换成一个排好序的map的。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SortedMap sortMap = <span class="keyword">new</span> TreeMap(<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(K k1, K k2)</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">return</span> k1.<span class="title">compareTo</span><span class="params">(k2)</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">sortMap.putAll(map);</span><br></pre></td></tr></table></figure>
<h2 id="3-_根据value在Map中排序">3. 根据value在Map中排序</h2><p>将Map变成一个list然后排序也是可以的，不同的是我们比较Entry.getValue().下面的代码和上面几乎一样。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List <span class="built_in">list</span> = <span class="keyword">new</span> ArrayList(<span class="built_in">map</span>.entrySet());</span><br><span class="line">Collections.sort(<span class="built_in">list</span>,<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">	@<span class="function">Override</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Entry e1, Entry e2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> e1.getValue().compareTo(e2.getValue());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>我们仍然可以使用一个排序的Map来解决这个问题，但只有当value是唯一的时候。在这样的条件下，你可以把key-value的值反倒。这个解决方案有很强的限制，因此不推荐使用。</p>
<h2 id="4-_初始化一个静态的或者不可以变的Map">4. 初始化一个静态的或者不可以变的Map</h2><p>当你期望Map保持不变时，将它复制到一个不可改变的Map上是一个很好的做法。这种防御性的编程技术将帮助您创建不仅使用安全局，但而且线程Map也很安全。<br>初始化一个静态的、一成不变的Map，我们可以使用一个静态初始化器（如下）。这个代码的问题是，尽管Map被声明为static final，我们仍然可以在初始化之后对它进行操作，如Test.map.put(3,”three”);操作。因此它不是真的不可改变的。使用静态初始化器创建一个不变的Map，在初始化的最后一步，我们需要一个额外的匿名类并复制到一个不可修改的Map中。请参阅第二段代码。如果你运行Test.map.put(3,”three”);然后一个UnsupportedOperationException异常将会被抛出。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> final Map <span class="built_in">map</span>;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		<span class="built_in">map</span> = <span class="keyword">new</span> Map();</span><br><span class="line">		<span class="built_in">map</span>.put(<span class="string">"a"</span>,<span class="number">3</span>);</span><br><span class="line">		<span class="built_in">map</span>.put(<span class="string">"b"</span>,<span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> final Map <span class="built_in">map</span>;</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		Map tmpMap = <span class="keyword">new</span> Map();</span><br><span class="line">		tmpMap.put(<span class="string">"a"</span>,<span class="number">3</span>);</span><br><span class="line">		tmpMap.put(<span class="string">"b"</span>,<span class="number">4</span>);</span><br><span class="line">		<span class="built_in">map</span> = Collections.unmodifiableMap(tmpMap);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Guava libraries也支持不同的初始化静态不变的Collection的方法。要了解更多关于Guava 不可变的Collection的好处，去看不可变集合的解释在Guava User Guide中。</p>
<h2 id="5-_HashMap,TreeMap,HashTable区别">5. HashMap,TreeMap,HashTable区别</h2><p>在Java中实现Map接口的三个主要实现类分别是：HashMap,TreeMap,HashTable<br>他们之间最重要的区别如下：</p>
<ol>
<li><strong>遍历的顺序</strong>。HashMap和HashTable不能保证map中元素的顺序，特别是，他们不保证随着时间的推移顺序会保持不变。但TreeMap将遍历整个条目按“自然顺序”的key值，或由一个比较器。</li>
<li><strong>key-value的规则</strong>。HashMap允许null的key或者value（只能有一个null的key，因为map中不能存在两个相同的key）。HashTable不允许null的key或者value。如果TreeMap根据自然顺序或者比较器来排序的话，它的key值不能为null，否则会抛出异常。</li>
<li><strong>同步</strong>。只有HashTable是同步的。因此如果不需要实现一个线程安全，推荐使用HashMap代替HashTable。</li>
</ol>
<h2 id="6-_具有反向视图和查询的Map">6. 具有反向视图和查询的Map</h2><p>有时候，我们需要一个key-value对的集合，这就意味着key和value都是唯一的（one-to-one Map）。这种约束可以确保可以创建一个“反向试图和查询的Map”。所以我们可以通过value去查询一个key。这种数据结构被称作双向映射的Map，不幸的是java JDK不支持。<br>    Apache Common Collections 和 Guava 提供了实现双向映射的Map类。分别称为BidiMap和BiMap。这两种都需要强制约束它们的key和value的值1:1的关系。</p>
<h2 id="7-_Map的浅拷贝">7. Map的浅拷贝</h2><p>在Java中实现Map的大部分类，提供一个拷贝其他map的构造方法。但是拷贝的过程不是同步的。那就意味着当一个线程拷贝一个map，另一个线程可能会改变它的结构。为了阻止偶然不同步的拷贝，必须提前用到Collections.synchronizedMap()。</p>
<blockquote>
<p>Map copiedMap = Collections.synchronizedMap(map);<br>另一种有趣的浅拷贝的方式是使用clone(),然而即使是Java集合框架的设计者Josh Bloch都不推荐使用这种方法。在一次讨论” constructor 和 cloning 拷贝的比较”中，他说：<br>我经常提供一个public的clone方法在创建类的时候，因为大家希望如此。这是克隆的耻辱，但它发生。…克隆是一个弱点，我认为人们应该意识到它的局限性。</p>
</blockquote>
<p>正因如此，我将不会告诉你如何使用clone()方法进行拷贝一个map。</p>
<h2 id="8-_创建一个空的Map">8. 创建一个空的Map</h2><p>如果Map是不可变的。使用<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span> = Collections.emptyMap();</span><br></pre></td></tr></table></figure></p>
<p>否则，使用如下实现的方式。<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>();</span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.programcreek.com/2013/09/top-9-questions-for-java-map/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/07/HashMap-vs-TreeMap-vs-HashTable-vs-LinkedHashMap/">
                HashMap vs TreeMap vs HashTable vs LinkedHashMap
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-07
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Simple-Java/">Simple Java</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/07/HashMap-vs-TreeMap-vs-HashTable-vs-LinkedHashMap/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/07/HashMap-vs-TreeMap-vs-HashTable-vs-LinkedHashMap/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>Java中Map是最重要的数据结构之一。在这篇文章中，我将说明如何使用不同类型的Map，如HashMap，TreeMap，哈希表和LinkedHashMap。</p>
<h2 id="1-_Map的概要">1. Map的概要</h2><p><img src="/avatar/MapClassHierarchy.png" alt="Alt text"></p>
<p>在Java SE中有四种经常被实现的Map类型被使用。HashMap，TreeMap，HashTable和LinkedHashMap。</p>
<pre><code><span class="bullet">* </span>HashMap是一个哈希表实现的,它的键或值是没有排序的。
<span class="bullet">* </span>TreeMap是基于红黑树结构的实现，它是按照key进行排序的。
<span class="bullet">* </span>LinkedHashMap保留插入顺序排序。
<span class="bullet">* </span>哈希表是同步的，即线程安全的，其他的与HashMap一样。它有一个同步的开销。这是HashMap应该在程序是线程安全的时候被使用的原因。
</code></pre><h2 id="2-_HashMap">2. HashMap</h2><p>如果HashMap的key值是自定义的对象，那么equals()和hashCode()方法的规定需要被遵循。</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	String <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog<span class="params">(String c)</span> &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line">	public String toString<span class="params">()</span>&#123;	</span><br><span class="line">		return <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class TestHashMap &#123;</span><br><span class="line">	public static void main<span class="params">(String[] args)</span> &#123;</span><br><span class="line">		HashMap&lt;Dog, Integer&gt; hashMap = new HashMap&lt;Dog, Integer&gt;<span class="params">()</span>;</span><br><span class="line">		Dog d1 = new Dog<span class="params">(<span class="string">"red"</span>)</span>;</span><br><span class="line">		Dog d2 = new Dog<span class="params">(<span class="string">"black"</span>)</span>;</span><br><span class="line">		Dog d3 = new Dog<span class="params">(<span class="string">"white"</span>)</span>;</span><br><span class="line">		Dog d4 = new Dog<span class="params">(<span class="string">"white"</span>)</span>;</span><br><span class="line"> </span><br><span class="line">		hashMap.put<span class="params">(d1, <span class="number">10</span>)</span>;</span><br><span class="line">		hashMap.put<span class="params">(d2, <span class="number">15</span>)</span>;</span><br><span class="line">		hashMap.put<span class="params">(d3, <span class="number">5</span>)</span>;</span><br><span class="line">		hashMap.put<span class="params">(d4, <span class="number">20</span>)</span>;</span><br><span class="line"> </span><br><span class="line">		<span class="comment">//print size</span></span><br><span class="line">		System.out.println<span class="params">(hashMap.size<span class="params">()</span>)</span>;</span><br><span class="line"> </span><br><span class="line">		<span class="comment">//loop HashMap</span></span><br><span class="line">		<span class="keyword">for</span> <span class="params">(Entry&lt;Dog, Integer&gt; entry : hashMap.entrySet<span class="params">()</span>)</span> &#123;</span><br><span class="line">			System.out.println<span class="params">(entry.getKey<span class="params">()</span>.toString<span class="params">()</span> + <span class="string">" - "</span> + entry.getValue<span class="params">()</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>4<br>white dog - 5<br>black dog - 15<br>red dog - 10<br>white dog - 20</p>
</blockquote>
<p>注意，我们错误的add “white dogs” 两次，但是HashMap接受了。这并没有意义的，因为现在我们很困惑有多少只white dogs在HashMap中。</p>
<p>Dog类必须定义如下所示：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">		<span class="keyword">return</span> ((Dog) o).<span class="built_in">color</span>.equals(<span class="keyword">this</span>.<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span>.length();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在输出的结果：</p>
<blockquote>
<p>3<br>red dog - 10<br>white dog - 20<br>black dog - 15</p>
</blockquote>
<p>原因是HashMap不允许两个相同的元素。默认情况下，该hashcode()和equals()方法在对象类实现的被使用。默认hashcode()方法return不同的对象不同的整数返回值，equals()方法只返回true仅当两个引用指向同一个对象。看看hashcode()和equals()的约定是不是符合你的预期。</p>
<h2 id="3-_TreeMap">3. TreeMap</h2><p>TreeMap是按key值排序的。让我们先来看一下下面的例子来理解“按key排序”的思路。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">		<span class="keyword">return</span> ((Dog) o).<span class="built_in">color</span>.equals(<span class="keyword">this</span>.<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span>.length();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class TestTreeMap &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		Dog d1 = <span class="keyword">new</span> Dog(<span class="string">"red"</span>);</span><br><span class="line">		Dog d2 = <span class="keyword">new</span> Dog(<span class="string">"black"</span>);</span><br><span class="line">		Dog d3 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line">		Dog d4 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line"> </span><br><span class="line">		TreeMap&lt;Dog, Integer&gt; treeMap = <span class="keyword">new</span> TreeMap&lt;Dog, Integer&gt;();</span><br><span class="line">		treeMap.put(d1, <span class="number">10</span>);</span><br><span class="line">		treeMap.put(d2, <span class="number">15</span>);</span><br><span class="line">		treeMap.put(d3, <span class="number">5</span>);</span><br><span class="line">		treeMap.put(d4, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Dog, Integer&gt; entry : treeMap.entrySet()) &#123;</span><br><span class="line">			System.out.<span class="built_in">println</span>(entry.getKey() + <span class="string">" - "</span> + entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>Exception in thread “main” java.lang.ClassCastException: collection.Dog cannot be &gt; cast to java.lang.Comparable<br>at java.util.TreeMap.put(Unknown Source)<br>at collection.TestHashMap.main(TestHashMap.java:35)</p>
</blockquote>
<p>从TreeMap是按key排序的，key的对象必须能够相互比较，这就是为什么它必须实现Comparable接口。例如，您将使用字符串作为键，因为字符串实现了Comparable接口。</p>
<p>修改Dog类让它具有可比性</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">class Dog implements Comparable&lt;Dog&gt;&#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line">	<span class="built_in">int</span> <span class="built_in">size</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c, <span class="built_in">int</span> s) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">		<span class="built_in">size</span> = s;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	@Override</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> compareTo(Dog o) &#123;</span><br><span class="line">		<span class="keyword">return</span>  o.<span class="built_in">size</span> - <span class="keyword">this</span>.<span class="built_in">size</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class TestTreeMap &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">		Dog d1 = <span class="keyword">new</span> Dog(<span class="string">"red"</span>, <span class="number">30</span>);</span><br><span class="line">		Dog d2 = <span class="keyword">new</span> Dog(<span class="string">"black"</span>, <span class="number">20</span>);</span><br><span class="line">		Dog d3 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>, <span class="number">10</span>);</span><br><span class="line">		Dog d4 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>, <span class="number">10</span>);</span><br><span class="line"> </span><br><span class="line">		TreeMap&lt;Dog, Integer&gt; treeMap = <span class="keyword">new</span> TreeMap&lt;Dog, Integer&gt;();</span><br><span class="line">		treeMap.put(d1, <span class="number">10</span>);</span><br><span class="line">		treeMap.put(d2, <span class="number">15</span>);</span><br><span class="line">		treeMap.put(d3, <span class="number">5</span>);</span><br><span class="line">		treeMap.put(d4, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Dog, Integer&gt; entry : treeMap.entrySet()) &#123;</span><br><span class="line">			System.out.<span class="built_in">println</span>(entry.getKey() + <span class="string">" - "</span> + entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<blockquote>
<p>red dog - 10<br>black dog - 15<br>white dog - 20</p>
</blockquote>
<p>在这种情况下，它是根据key排序的，即Dog的size属性值。<br>如果”Dog d4 = new Dog(“white”, 10);” 被这句话替代 “Dog d4 = new Dog(“white”, 40);”, 输出结果将会是:</p>
<blockquote>
<p>white dog - 20<br>red dog - 10<br>black dog - 15<br>white dog - 5</p>
</blockquote>
<p>原因是，现在使用的方法compareto()比较TreeMap的key值。不同Dog的size不同！</p>
<h2 id="4-_HashTable">4. HashTable</h2><p>来自Java Doc<br>HashMap类大致相当于HashTable，除了它是不同步的，允许有空值之外。</p>
<h2 id="5-_LinkedHashMap">5. LinkedHashMap</h2><p>LinkedHashMap是HashMap的子类。这意味着它继承了HashMap的特点。此外，链表保留了插入顺序的排序。</p>
<p>让我们用相同的代码使用LinkedHashMap替换HashMap。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">class Dog &#123;</span><br><span class="line">	<span class="keyword">String</span> <span class="built_in">color</span>;</span><br><span class="line"> </span><br><span class="line">	Dog(<span class="keyword">String</span> c) &#123;</span><br><span class="line">		<span class="built_in">color</span> = c;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">		<span class="keyword">return</span> ((Dog) o).<span class="built_in">color</span>.equals(<span class="keyword">this</span>.<span class="built_in">color</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span>.length();</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">String</span> toString()&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">color</span> + <span class="string">" dog"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> class TestHashMap &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line"> </span><br><span class="line">		Dog d1 = <span class="keyword">new</span> Dog(<span class="string">"red"</span>);</span><br><span class="line">		Dog d2 = <span class="keyword">new</span> Dog(<span class="string">"black"</span>);</span><br><span class="line">		Dog d3 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line">		Dog d4 = <span class="keyword">new</span> Dog(<span class="string">"white"</span>);</span><br><span class="line"> </span><br><span class="line">		LinkedHashMap&lt;Dog, Integer&gt; linkedHashMap = <span class="keyword">new</span> LinkedHashMap&lt;Dog, Integer&gt;();</span><br><span class="line">		linkedHashMap.put(d1, <span class="number">10</span>);</span><br><span class="line">		linkedHashMap.put(d2, <span class="number">15</span>);</span><br><span class="line">		linkedHashMap.put(d3, <span class="number">5</span>);</span><br><span class="line">		linkedHashMap.put(d4, <span class="number">20</span>);</span><br><span class="line"> </span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Dog, Integer&gt; entry : linkedHashMap.entrySet()) &#123;</span><br><span class="line">			System.out.<span class="built_in">println</span>(entry.getKey() + <span class="string">" - "</span> + entry.getValue());</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<blockquote>
<p>red dog - 10<br>black dog - 15<br>white dog - 20</p>
</blockquote>
<p>不同的是，如果我们使用HashMap的输出结果顺序和插入的顺序是不一定一致的。</p>
<blockquote>
<p>red dog - 10<br>white dog - 20<br>black dog - 15</p>
</blockquote>
<p><a href="http://www.programcreek.com/2013/03/hashmap-vs-treemap-vs-hashtable-vs-linkedhashmap/" target="_blank" rel="external">原文链接</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2015/07/07/remove以-bak结尾的文件/">
                remove以.bak结尾的文件
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-07
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/Java-Tools/">Java Tools</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/07/07/remove以-bak结尾的文件/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/07/remove以-bak结尾的文件/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>使用UltraEdit编辑器的时候，产生了好多.bak结尾的备份文件。<br>一个一个的删除掉又比较费时，没啥意义，就想了个办法写个小程序来帮我做喽。<br>程序很简单，涉及到文件的路径和文件的递归遍历这两点。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.<span class="keyword">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> FileUtils &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		String filePath = <span class="string">"D:/test/_posts"</span>;</span><br><span class="line">		String suffix = <span class="string">".bak"</span>;</span><br><span class="line">		removeSomeFiles(filePath, suffix);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span><br><span class="line">	 * 删除以指定格式结尾的文件如 .txt .jpg .mp3等等</span><br><span class="line">	 * @param filePath 目录或文件的路径</span><br><span class="line">	 * @param suffix   文件结尾的格式</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> removeSomeFiles(String filePath, String suffix) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="keyword">File</span> f = <span class="keyword">new</span> <span class="keyword">File</span>(filePath);</span><br><span class="line">		<span class="keyword">if</span>(!f.isDirectory()) &#123;</span><br><span class="line">			<span class="keyword">if</span>(f.getName().endsWith(suffix)) </span><br><span class="line">				f.<span class="keyword">delete</span>();</span><br><span class="line">			</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">File</span>[] list = f.listFiles();</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">File</span> <span class="keyword">file</span> : list) &#123;</span><br><span class="line">				removeSomeFiles(<span class="keyword">file</span>.getCanonicalPath(), suffix);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
  </div>

  
  <div class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">&raquo;</a>
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/avatar/yihu.jpg" alt="Cao Sai" />
          <p class="site-author-name">Cao Sai</p>
        </div>
        <p class="site-description motion-element">To err is human; to forgive, divine.</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">27</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/caosai" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/cslience" target="_blank">Weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.jianshu.com/users/d87ba011ebff/timeline" target="_blank">JianShu</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/zero/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-zero.svg" alt="Creative Commons" />
            </a>
          </div>
        

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Cao Sai</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"caosai"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  

</body>
</html>
